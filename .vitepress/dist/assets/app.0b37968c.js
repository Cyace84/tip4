import{d as L,a5 as Yt,l as Pe,c as T,U as lt,n as ne,b as V,w as Z,R as Ye,O as Ge,J as ee,e as te,k as C,K as le,a as Ie,t as q,a1 as Gt,a3 as Jt,a6 as Xt,L as Ce,o as m,r as Qt,N as de,D as dt,$ as Zt,S as en,E as be,a7 as ht,_ as G,h as $,g as Oe,p as pt,m as ft,C as vt,z as mt,a8 as bt,j as Ae,u as Je,G as tn,I as nn,a9 as sn,aa as rn,ab as xe,ac as an,ad as st,W as ze,ae as on,af as cn,ag as un,ah as ln,ai as dn,aj as hn,ak as pn,al as fn,am as vn,an as mn,Z as bn,A as gn,ao as yn,ap as wn,aq as _n}from"./chunks/framework.ab3d0493.js";import{t as Ve}from"./chunks/theme.b4feb8ae.js";var Tn=Object.defineProperty,it=Object.getOwnPropertySymbols,Pn=Object.prototype.hasOwnProperty,Cn=Object.prototype.propertyIsEnumerable,rt=(e,t,n)=>t in e?Tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gt=(e,t)=>{for(var n in t||(t={}))Pn.call(t,n)&&rt(e,n,t[n]);if(it)for(var n of it(t))Cn.call(t,n)&&rt(e,n,t[n]);return e},ke=e=>typeof e=="function",De=e=>typeof e=="string",yt=e=>De(e)&&e.trim().length>0,On=e=>typeof e=="number",Q=e=>typeof e>"u",he=e=>typeof e=="object"&&e!==null,Sn=e=>H(e,"tag")&&yt(e.tag),wt=e=>window.TouchEvent&&e instanceof TouchEvent,_t=e=>H(e,"component")&&Tt(e.component),En=e=>ke(e)||he(e),Tt=e=>!Q(e)&&(De(e)||En(e)||_t(e)),at=e=>he(e)&&["height","width","right","left","top","bottom"].every(t=>On(e[t])),H=(e,t)=>(he(e)||ke(e))&&t in e,In=(e=>()=>e++)(0);function Be(e){return wt(e)?e.targetTouches[0].clientX:e.clientX}function ot(e){return wt(e)?e.targetTouches[0].clientY:e.clientY}var An=e=>{Q(e.remove)?e.parentNode&&e.parentNode.removeChild(e):e.remove()},ge=e=>_t(e)?ge(e.component):Sn(e)?L({render(){return e}}):typeof e=="string"?e:Yt(Pe(e)),kn=e=>{if(typeof e=="string")return e;const t=H(e,"props")&&he(e.props)?e.props:{},n=H(e,"listeners")&&he(e.listeners)?e.listeners:{};return{component:ge(e),props:t,listeners:n}},Dn=()=>typeof window<"u",Le=class{constructor(){this.allHandlers={}}getHandlers(e){return this.allHandlers[e]||[]}on(e,t){const n=this.getHandlers(e);n.push(t),this.allHandlers[e]=n}off(e,t){const n=this.getHandlers(e);n.splice(n.indexOf(t)>>>0,1)}emit(e,t){this.getHandlers(e).forEach(s=>s(t))}},Ln=e=>["on","off","emit"].every(t=>H(e,t)&&ke(e[t])),B;(function(e){e.SUCCESS="success",e.ERROR="error",e.WARNING="warning",e.INFO="info",e.DEFAULT="default"})(B||(B={}));var pe;(function(e){e.TOP_LEFT="top-left",e.TOP_CENTER="top-center",e.TOP_RIGHT="top-right",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_CENTER="bottom-center",e.BOTTOM_RIGHT="bottom-right"})(pe||(pe={}));var N;(function(e){e.ADD="add",e.DISMISS="dismiss",e.UPDATE="update",e.CLEAR="clear",e.UPDATE_DEFAULTS="update_defaults"})(N||(N={}));var F="Vue-Toastification",z={type:{type:String,default:B.DEFAULT},classNames:{type:[String,Array],default:()=>[]},trueBoolean:{type:Boolean,default:!0}},Pt={type:z.type,customIcon:{type:[String,Boolean,Object,Function],default:!0}},we={component:{type:[String,Object,Function,Boolean],default:"button"},classNames:z.classNames,showOnHover:{type:Boolean,default:!1},ariaLabel:{type:String,default:"close"}},Fe={timeout:{type:[Number,Boolean],default:5e3},hideProgressBar:{type:Boolean,default:!1},isRunning:{type:Boolean,default:!1}},Ct={transition:{type:[Object,String],default:`${F}__bounce`}},jn={position:{type:String,default:pe.TOP_RIGHT},draggable:z.trueBoolean,draggablePercent:{type:Number,default:.6},pauseOnFocusLoss:z.trueBoolean,pauseOnHover:z.trueBoolean,closeOnClick:z.trueBoolean,timeout:Fe.timeout,hideProgressBar:Fe.hideProgressBar,toastClassName:z.classNames,bodyClassName:z.classNames,icon:Pt.customIcon,closeButton:we.component,closeButtonClassName:we.classNames,showCloseButtonOnHover:we.showOnHover,accessibility:{type:Object,default:()=>({toastRole:"alert",closeButtonLabel:"close"})},rtl:{type:Boolean,default:!1},eventBus:{type:Object,required:!1,default:()=>new Le}},Rn={id:{type:[String,Number],required:!0,default:0},type:z.type,content:{type:[String,Object,Function],required:!0,default:""},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0}},Mn={container:{type:[Object,Function],default:()=>document.body},newestOnTop:z.trueBoolean,maxToasts:{type:Number,default:20},transition:Ct.transition,toastDefaults:Object,filterBeforeCreate:{type:Function,default:e=>e},filterToasts:{type:Function,default:e=>e},containerClassName:z.classNames,onMounted:Function,shareAppContext:[Boolean,Object]},W={CORE_TOAST:jn,TOAST:Rn,CONTAINER:Mn,PROGRESS_BAR:Fe,ICON:Pt,TRANSITION:Ct,CLOSE_BUTTON:we},Ot=L({name:"VtProgressBar",props:W.PROGRESS_BAR,data(){return{hasClass:!0}},computed:{style(){return{animationDuration:`${this.timeout}ms`,animationPlayState:this.isRunning?"running":"paused",opacity:this.hideProgressBar?0:1}},cpClass(){return this.hasClass?`${F}__progress-bar`:""}},watch:{timeout(){this.hasClass=!1,this.$nextTick(()=>this.hasClass=!0)}},mounted(){this.$el.addEventListener("animationend",this.animationEnded)},beforeUnmount(){this.$el.removeEventListener("animationend",this.animationEnded)},methods:{animationEnded(){this.$emit("close-toast")}}});function Bn(e,t){return m(),T("div",{style:lt(e.style),class:ne(e.cpClass)},null,6)}Ot.render=Bn;var $n=Ot,St=L({name:"VtCloseButton",props:W.CLOSE_BUTTON,computed:{buttonComponent(){return this.component!==!1?ge(this.component):"button"},classes(){const e=[`${F}__close-button`];return this.showOnHover&&e.push("show-on-hover"),e.concat(this.classNames)}}}),Nn=Ie(" Ã— ");function xn(e,t){return m(),V(Ge(e.buttonComponent),Ye({"aria-label":e.ariaLabel,class:e.classes},e.$attrs),{default:Z(()=>[Nn]),_:1},16,["aria-label","class"])}St.render=xn;var zn=St,Et={},Vn={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"svg-inline--fa fa-check-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Fn=C("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},null,-1),Un=[Fn];function Hn(e,t){return m(),T("svg",Vn,Un)}Et.render=Hn;var qn=Et,It={},Kn={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"info-circle",class:"svg-inline--fa fa-info-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Wn=C("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},null,-1),Yn=[Wn];function Gn(e,t){return m(),T("svg",Kn,Yn)}It.render=Gn;var ct=It,At={},Jn={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-circle",class:"svg-inline--fa fa-exclamation-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Xn=C("path",{fill:"currentColor",d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),Qn=[Xn];function Zn(e,t){return m(),T("svg",Jn,Qn)}At.render=Zn;var es=At,kt={},ts={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-triangle",class:"svg-inline--fa fa-exclamation-triangle fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},ns=C("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),ss=[ns];function is(e,t){return m(),T("svg",ts,ss)}kt.render=is;var rs=kt,Dt=L({name:"VtIcon",props:W.ICON,computed:{customIconChildren(){return H(this.customIcon,"iconChildren")?this.trimValue(this.customIcon.iconChildren):""},customIconClass(){return De(this.customIcon)?this.trimValue(this.customIcon):H(this.customIcon,"iconClass")?this.trimValue(this.customIcon.iconClass):""},customIconTag(){return H(this.customIcon,"iconTag")?this.trimValue(this.customIcon.iconTag,"i"):"i"},hasCustomIcon(){return this.customIconClass.length>0},component(){return this.hasCustomIcon?this.customIconTag:Tt(this.customIcon)?ge(this.customIcon):this.iconTypeComponent},iconTypeComponent(){return{[B.DEFAULT]:ct,[B.INFO]:ct,[B.SUCCESS]:qn,[B.ERROR]:rs,[B.WARNING]:es}[this.type]},iconClasses(){const e=[`${F}__icon`];return this.hasCustomIcon?e.concat(this.customIconClass):e}},methods:{trimValue(e,t=""){return yt(e)?e.trim():t}}});function as(e,t){return m(),V(Ge(e.component),{class:ne(e.iconClasses)},{default:Z(()=>[Ie(q(e.customIconChildren),1)]),_:1},8,["class"])}Dt.render=as;var os=Dt,Lt=L({name:"VtToast",components:{ProgressBar:$n,CloseButton:zn,Icon:os},inheritAttrs:!1,props:Object.assign({},W.CORE_TOAST,W.TOAST),data(){return{isRunning:!0,disableTransitions:!1,beingDragged:!1,dragStart:0,dragPos:{x:0,y:0},dragRect:{}}},computed:{classes(){const e=[`${F}__toast`,`${F}__toast--${this.type}`,`${this.position}`].concat(this.toastClassName);return this.disableTransitions&&e.push("disable-transition"),this.rtl&&e.push(`${F}__toast--rtl`),e},bodyClasses(){return[`${F}__toast-${De(this.content)?"body":"component-body"}`].concat(this.bodyClassName)},draggableStyle(){return this.dragStart===this.dragPos.x?{}:this.beingDragged?{transform:`translateX(${this.dragDelta}px)`,opacity:1-Math.abs(this.dragDelta/this.removalDistance)}:{transition:"transform 0.2s, opacity 0.2s",transform:"translateX(0)",opacity:1}},dragDelta(){return this.beingDragged?this.dragPos.x-this.dragStart:0},removalDistance(){return at(this.dragRect)?(this.dragRect.right-this.dragRect.left)*this.draggablePercent:0}},mounted(){this.draggable&&this.draggableSetup(),this.pauseOnFocusLoss&&this.focusSetup()},beforeUnmount(){this.draggable&&this.draggableCleanup(),this.pauseOnFocusLoss&&this.focusCleanup()},methods:{hasProp:H,getVueComponentFromObj:ge,closeToast(){this.eventBus.emit(N.DISMISS,this.id)},clickHandler(){this.onClick&&this.onClick(this.closeToast),this.closeOnClick&&(!this.beingDragged||this.dragStart===this.dragPos.x)&&this.closeToast()},timeoutHandler(){this.closeToast()},hoverPause(){this.pauseOnHover&&(this.isRunning=!1)},hoverPlay(){this.pauseOnHover&&(this.isRunning=!0)},focusPause(){this.isRunning=!1},focusPlay(){this.isRunning=!0},focusSetup(){addEventListener("blur",this.focusPause),addEventListener("focus",this.focusPlay)},focusCleanup(){removeEventListener("blur",this.focusPause),removeEventListener("focus",this.focusPlay)},draggableSetup(){const e=this.$el;e.addEventListener("touchstart",this.onDragStart,{passive:!0}),e.addEventListener("mousedown",this.onDragStart),addEventListener("touchmove",this.onDragMove,{passive:!1}),addEventListener("mousemove",this.onDragMove),addEventListener("touchend",this.onDragEnd),addEventListener("mouseup",this.onDragEnd)},draggableCleanup(){const e=this.$el;e.removeEventListener("touchstart",this.onDragStart),e.removeEventListener("mousedown",this.onDragStart),removeEventListener("touchmove",this.onDragMove),removeEventListener("mousemove",this.onDragMove),removeEventListener("touchend",this.onDragEnd),removeEventListener("mouseup",this.onDragEnd)},onDragStart(e){this.beingDragged=!0,this.dragPos={x:Be(e),y:ot(e)},this.dragStart=Be(e),this.dragRect=this.$el.getBoundingClientRect()},onDragMove(e){this.beingDragged&&(e.preventDefault(),this.isRunning&&(this.isRunning=!1),this.dragPos={x:Be(e),y:ot(e)})},onDragEnd(){this.beingDragged&&(Math.abs(this.dragDelta)>=this.removalDistance?(this.disableTransitions=!0,this.$nextTick(()=>this.closeToast())):setTimeout(()=>{this.beingDragged=!1,at(this.dragRect)&&this.pauseOnHover&&this.dragRect.bottom>=this.dragPos.y&&this.dragPos.y>=this.dragRect.top&&this.dragRect.left<=this.dragPos.x&&this.dragPos.x<=this.dragRect.right?this.isRunning=!1:this.isRunning=!0}))}}}),cs=["role"];function us(e,t){const n=ee("Icon"),s=ee("CloseButton"),r=ee("ProgressBar");return m(),T("div",{class:ne(e.classes),style:lt(e.draggableStyle),onClick:t[0]||(t[0]=(...i)=>e.clickHandler&&e.clickHandler(...i)),onMouseenter:t[1]||(t[1]=(...i)=>e.hoverPause&&e.hoverPause(...i)),onMouseleave:t[2]||(t[2]=(...i)=>e.hoverPlay&&e.hoverPlay(...i))},[e.icon?(m(),V(n,{key:0,"custom-icon":e.icon,type:e.type},null,8,["custom-icon","type"])):te("v-if",!0),C("div",{role:e.accessibility.toastRole||"alert",class:ne(e.bodyClasses)},[typeof e.content=="string"?(m(),T(le,{key:0},[Ie(q(e.content),1)],2112)):(m(),V(Ge(e.getVueComponentFromObj(e.content)),Ye({key:1,"toast-id":e.id},e.hasProp(e.content,"props")?e.content.props:{},Gt(e.hasProp(e.content,"listeners")?e.content.listeners:{}),{onCloseToast:e.closeToast}),null,16,["toast-id","onCloseToast"]))],10,cs),e.closeButton?(m(),V(s,{key:1,component:e.closeButton,"class-names":e.closeButtonClassName,"show-on-hover":e.showCloseButtonOnHover,"aria-label":e.accessibility.closeButtonLabel,onClick:Jt(e.closeToast,["stop"])},null,8,["component","class-names","show-on-hover","aria-label","onClick"])):te("v-if",!0),e.timeout?(m(),V(r,{key:2,"is-running":e.isRunning,"hide-progress-bar":e.hideProgressBar,timeout:e.timeout,onCloseToast:e.timeoutHandler},null,8,["is-running","hide-progress-bar","timeout","onCloseToast"])):te("v-if",!0)],38)}Lt.render=us;var ls=Lt,jt=L({name:"VtTransition",props:W.TRANSITION,emits:["leave"],methods:{hasProp:H,leave(e){e instanceof HTMLElement&&(e.style.left=e.offsetLeft+"px",e.style.top=e.offsetTop+"px",e.style.width=getComputedStyle(e).width,e.style.position="absolute")}}});function ds(e,t){return m(),V(Xt,{tag:"div","enter-active-class":e.transition.enter?e.transition.enter:`${e.transition}-enter-active`,"move-class":e.transition.move?e.transition.move:`${e.transition}-move`,"leave-active-class":e.transition.leave?e.transition.leave:`${e.transition}-leave-active`,onLeave:e.leave},{default:Z(()=>[Qt(e.$slots,"default")]),_:3},8,["enter-active-class","move-class","leave-active-class","onLeave"])}jt.render=ds;var hs=jt,Rt=L({name:"VueToastification",devtools:{hide:!0},components:{Toast:ls,VtTransition:hs},props:Object.assign({},W.CORE_TOAST,W.CONTAINER,W.TRANSITION),data(){return{count:0,positions:Object.values(pe),toasts:{},defaults:{}}},computed:{toastArray(){return Object.values(this.toasts)},filteredToasts(){return this.defaults.filterToasts(this.toastArray)}},beforeMount(){const e=this.eventBus;e.on(N.ADD,this.addToast),e.on(N.CLEAR,this.clearToasts),e.on(N.DISMISS,this.dismissToast),e.on(N.UPDATE,this.updateToast),e.on(N.UPDATE_DEFAULTS,this.updateDefaults),this.defaults=this.$props},mounted(){this.setup(this.container)},methods:{async setup(e){ke(e)&&(e=await e()),An(this.$el),e.appendChild(this.$el)},setToast(e){Q(e.id)||(this.toasts[e.id]=e)},addToast(e){e.content=kn(e.content);const t=Object.assign({},this.defaults,e.type&&this.defaults.toastDefaults&&this.defaults.toastDefaults[e.type],e),n=this.defaults.filterBeforeCreate(t,this.toastArray);n&&this.setToast(n)},dismissToast(e){const t=this.toasts[e];!Q(t)&&!Q(t.onClose)&&t.onClose(),delete this.toasts[e]},clearToasts(){Object.keys(this.toasts).forEach(e=>{this.dismissToast(e)})},getPositionToasts(e){const t=this.filteredToasts.filter(n=>n.position===e).slice(0,this.defaults.maxToasts);return this.defaults.newestOnTop?t.reverse():t},updateDefaults(e){Q(e.container)||this.setup(e.container),this.defaults=Object.assign({},this.defaults,e)},updateToast({id:e,options:t,create:n}){this.toasts[e]?(t.timeout&&t.timeout===this.toasts[e].timeout&&t.timeout++,this.setToast(Object.assign({},this.toasts[e],t))):n&&this.addToast(Object.assign({},{id:e},t))},getClasses(e){return[`${F}__container`,e].concat(this.defaults.containerClassName)}}});function ps(e,t){const n=ee("Toast"),s=ee("VtTransition");return m(),T("div",null,[(m(!0),T(le,null,Ce(e.positions,r=>(m(),T("div",{key:r},[de(s,{transition:e.defaults.transition,class:ne(e.getClasses(r))},{default:Z(()=>[(m(!0),T(le,null,Ce(e.getPositionToasts(r),i=>(m(),V(n,Ye({key:i.id},i),null,16))),128))]),_:2},1032,["transition","class"])]))),128))])}Rt.render=ps;var fs=Rt,ut=(e={},t=!0)=>{const n=e.eventBus=e.eventBus||new Le;t&&be(()=>{const i=ht(fs,gt({},e)),a=i.mount(document.createElement("div")),c=e.onMounted;if(Q(c)||c(a,i),e.shareAppContext){const l=e.shareAppContext;l===!0?console.warn(`[${F}] App to share context with was not provided.`):(i._context.components=l._context.components,i._context.directives=l._context.directives,i._context.mixins=l._context.mixins,i._context.provides=l._context.provides,i.config.globalProperties=l.config.globalProperties)}});const s=(i,a)=>{const c=Object.assign({},{id:In(),type:B.DEFAULT},a,{content:i});return n.emit(N.ADD,c),c.id};s.clear=()=>n.emit(N.CLEAR,void 0),s.updateDefaults=i=>{n.emit(N.UPDATE_DEFAULTS,i)},s.dismiss=i=>{n.emit(N.DISMISS,i)};function r(i,{content:a,options:c},l=!1){const f=Object.assign({},c,{content:a});n.emit(N.UPDATE,{id:i,options:f,create:l})}return s.update=r,s.success=(i,a)=>s(i,Object.assign({},a,{type:B.SUCCESS})),s.info=(i,a)=>s(i,Object.assign({},a,{type:B.INFO})),s.error=(i,a)=>s(i,Object.assign({},a,{type:B.ERROR})),s.warning=(i,a)=>s(i,Object.assign({},a,{type:B.WARNING})),s},vs=()=>{const e=()=>console.warn(`[${F}] This plugin does not support SSR!`);return new Proxy(e,{get(){return e}})};function fe(e){return Dn()?Ln(e)?ut({eventBus:e},!1):ut(e,!0):vs()}var je=Symbol("VueToastification"),Xe=new Le,ms=(e,t)=>{(t==null?void 0:t.shareAppContext)===!0&&(t.shareAppContext=e);const n=fe(gt({eventBus:Xe},t));e.provide(je,n)},bs=e=>{const t=fe(e);dt()&&Zt(je,t)},gs=e=>{if(e)return fe(e);const t=dt()?en(je,void 0):void 0;return t||fe(Xe)},Mt=ms;const ys=Object.freeze(Object.defineProperty({__proto__:null,EventBus:Le,get POSITION(){return pe},get TYPE(){return B},createToastInterface:fe,default:Mt,globalEventBus:Xe,provideToast:bs,toastInjectionKey:je,useToast:gs},Symbol.toStringTag,{value:"Module"}));const ws={name:"BDKSimpleToast",props:{text:{type:String,required:!0},collapseLength:{type:Number,default:60}},setup(e){const t=$(!0),n=Oe(()=>e.text.slice(0,e.collapseLength)),s=Oe(()=>e.text.length>e.collapseLength),r=()=>{t.value&&s.value?t.value=!1:closeToast()};return{isCollapsed:t,collapsedText:n,handleClick:()=>{s.value?r():closeToast()},shouldShowButton:s}}},_s=e=>(pt("data-v-b34f46d6"),e=e(),ft(),e),Ts={key:0,class:"toast-text-collapsed"},Ps=_s(()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1.3em",viewBox:"0 0 512 512"},[C("path",{d:"M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V352zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H320zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V352z"})],-1)),Cs=[Ps],Os={key:1,class:"toast-text-expanded"};function Ss(e,t,n,s,r,i){return m(),T("div",null,[s.isCollapsed?(m(),T("div",Ts,[Ie(q(s.collapsedText)+" ",1),s.shouldShowButton?(m(),T("button",{key:0,onClick:t[0]||(t[0]=(...a)=>s.handleClick&&s.handleClick(...a))},Cs)):te("",!0)])):(m(),T("div",Os,q(n.text),1))])}const ce=G(ws,[["render",Ss],["__scopeId","data-v-b34f46d6"]]);var Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Es(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var r=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return e[s]}})}),n}var J={exports:{}};const Is={},As=Object.freeze(Object.defineProperty({__proto__:null,default:Is},Symbol.toStringTag,{value:"Module"})),Re=Es(As),ks="dotenv",Ds="16.3.1",Ls="Loads environment variables from .env file",js="lib/main.js",Rs="lib/main.d.ts",Ms={".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},Bs={"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},$s={type:"git",url:"git://github.com/motdotla/dotenv.git"},Ns="https://github.com/motdotla/dotenv?sponsor=1",xs=["dotenv","env",".env","environment","variables","config","settings"],zs="README.md",Vs="BSD-2-Clause",Fs={"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},Us={node:">=12"},Hs={fs:!1},qs={name:ks,version:Ds,description:Ls,main:js,types:Rs,exports:Ms,scripts:Bs,repository:$s,funding:Ns,keywords:xs,readmeFilename:zs,license:Vs,devDependencies:Fs,engines:Us,browser:Hs},Bt=Re,Qe=Re,Ks=Re,Ws=Re,Ys=qs,Ze=Ys.version,Gs=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function Js(e){const t={};let n=e.toString();n=n.replace(/\r\n?/mg,`
`);let s;for(;(s=Gs.exec(n))!=null;){const r=s[1];let i=s[2]||"";i=i.trim();const a=i[0];i=i.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),a==='"'&&(i=i.replace(/\\n/g,`
`),i=i.replace(/\\r/g,"\r")),t[r]=i}return t}function Xs(e){const t=Nt(e),n=k.configDotenv({path:t});if(!n.parsed)throw new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);const s=$t(e).split(","),r=s.length;let i;for(let a=0;a<r;a++)try{const c=s[a].trim(),l=ei(n,c);i=k.decrypt(l.ciphertext,l.key);break}catch(c){if(a+1>=r)throw c}return k.parse(i)}function Qs(e){console.log(`[dotenv@${Ze}][INFO] ${e}`)}function Zs(e){console.log(`[dotenv@${Ze}][WARN] ${e}`)}function Ue(e){console.log(`[dotenv@${Ze}][DEBUG] ${e}`)}function $t(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:{}.DOTENV_KEY&&{}.DOTENV_KEY.length>0?{}.DOTENV_KEY:""}function ei(e,t){let n;try{n=new URL(t)}catch(c){throw c.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):c}const s=n.password;if(!s)throw new Error("INVALID_DOTENV_KEY: Missing key part");const r=n.searchParams.get("environment");if(!r)throw new Error("INVALID_DOTENV_KEY: Missing environment part");const i=`DOTENV_VAULT_${r.toUpperCase()}`,a=e.parsed[i];if(!a)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${i} in your .env.vault file.`);return{ciphertext:a,key:s}}function Nt(e){let t=Qe.resolve(process.cwd(),".env");return e&&e.path&&e.path.length>0&&(t=e.path),t.endsWith(".vault")?t:`${t}.vault`}function ti(e){return e[0]==="~"?Qe.join(Ks.homedir(),e.slice(1)):e}function ni(e){Qs("Loading env from encrypted .env.vault");const t=k._parseVault(e);let n=process.env;return e&&e.processEnv!=null&&(n=e.processEnv),k.populate(n,t,e),{parsed:t}}function si(e){let t=Qe.resolve(process.cwd(),".env"),n="utf8";const s=!!(e&&e.debug);e&&(e.path!=null&&(t=ti(e.path)),e.encoding!=null&&(n=e.encoding));try{const r=k.parse(Bt.readFileSync(t,{encoding:n}));let i=process.env;return e&&e.processEnv!=null&&(i=e.processEnv),k.populate(i,r,e),{parsed:r}}catch(r){return s&&Ue(`Failed to load ${t} ${r.message}`),{error:r}}}function ii(e){const t=Nt(e);return $t(e).length===0?k.configDotenv(e):Bt.existsSync(t)?k._configVault(e):(Zs(`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`),k.configDotenv(e))}function ri(e,t){const n=Buffer.from(t.slice(-64),"hex");let s=Buffer.from(e,"base64");const r=s.slice(0,12),i=s.slice(-16);s=s.slice(12,-16);try{const a=Ws.createDecipheriv("aes-256-gcm",n,r);return a.setAuthTag(i),`${a.update(s)}${a.final()}`}catch(a){const c=a instanceof RangeError,l=a.message==="Invalid key length",f=a.message==="Unsupported state or unable to authenticate data";if(c||l){const b="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(b)}else if(f){const b="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(b)}else throw console.error("Error: ",a.code),console.error("Error: ",a.message),a}}function ai(e,t,n={}){const s=!!(n&&n.debug),r=!!(n&&n.override);if(typeof t!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(const i of Object.keys(t))Object.prototype.hasOwnProperty.call(e,i)?(r===!0&&(e[i]=t[i]),s&&Ue(r===!0?`"${i}" is already defined and WAS overwritten`:`"${i}" is already defined and was NOT overwritten`)):e[i]=t[i]}const k={configDotenv:si,_configVault:ni,_parseVault:Xs,config:ii,decrypt:ri,parse:Js,populate:ai};J.exports.configDotenv=k.configDotenv;J.exports._configVault=k._configVault;J.exports._parseVault=k._parseVault;var oi=J.exports.config=k.config;J.exports.decrypt=k.decrypt;J.exports.parse=k.parse;J.exports.populate=k.populate;J.exports=k;function ci(e){return oi({path:`.${e}.env`}),{}.API_URL}async function He(e,t,n="prod"){const s=`${ci(n)}?projectName=${encodeURIComponent(e)}`,r=(i,a)=>i.find(c=>c.name===a);return await fetch(s).then(async i=>{if(!i.ok)throw new Error("Network response was not ok");const a=await i.json(),c=Object.values(a.pagesHtml);return r(c,t)}).catch(i=>{console.error("There has been a problem with your fetch operation:",i)})}const ui=L({name:"BDKDisconnectIcon",props:{size:{type:Number,default:24}}}),li={fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",height:"32",width:"32"},di=C("path",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.4753 18.2903H19.295H20.1146V21.5162V23.9355H15.1966L15.1967 27L13.0492 26.2799L8.11633 24.662C7.4459 24.433 7 24.2782 7 24.2782V7H8.63938C8.66196 7 8.68378 7.00459 8.70558 7.00919C8.72248 7.01275 8.73936 7.0163 8.75659 7.01772C8.76929 7.01605 8.78125 7.01267 8.79315 7.00931C8.80968 7.00464 8.8261 7 8.84424 7H17.6556H20.1146V11.8387H19.295H18.4753L18.4754 8.61267L17.6556 8.61281H13.8376H11.918L15.1966 9.41936V22.3226H18.4753V21.5162V18.2903ZM23.153 11.2686L27 15.0644C27 15.0644 26.7522 15.3194 26.4318 15.6346L23.153 18.8605L21.7541 20.2257L21.7539 15.8709H17.6556V15.0645V14.2581H21.7539L21.7541 9.90301L23.153 11.2686Z"},null,-1),hi=[di];function pi(e,t,n,s,r,i){return m(),T("svg",li,hi)}const xt=G(ui,[["render",pi]]);var Me={},E={},ae={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getUniqueId=e.mergeTransactions=e.LT_COLLATOR=e.Semaphore=e.DelayedTransactions=e.MessageExpiredException=e.AddressLiteral=e.isAddressObject=e.Address=void 0;class t{constructor(d){this.equals=v=>this._equals(v),this._address=d}toString(){return this._address}toJSON(){return this._address}_equals(d){return typeof d=="string"?this._address===d:this._address===(d==null?void 0:d._address)}}e.Address=t;function n(h){return h!=null&&(h instanceof t||Object.getPrototypeOf(h).constructor.name===t.prototype.constructor.name)}e.isAddressObject=n;class s extends t{constructor(d){super(d)}}e.AddressLiteral=s;class r extends Error{constructor(d,v){super("Message expired"),this.address=d,this.hash=v}}e.MessageExpiredException=r;class i{constructor(){this.transactions=new Map}async waitTransaction(d,v){var y;let R=(y=this.transactions.get(v))===null||y===void 0?void 0:y.promise;if(R==null){let g,o;R=new Promise((u,p)=>{g=w=>u(w),o=()=>p()}),this.transactions.set(v,{promise:R,resolve:g,reject:o})}const M=await R;if(M==null)throw new r(d,v);return M}fillTransaction(d,v){const y=this.transactions.get(d);y!=null?y.resolve(v):this.transactions.set(d,{promise:Promise.resolve(v),resolve:()=>{},reject:()=>{}})}}e.DelayedTransactions=i;class a{constructor(d){this.tasks=[],this.sched=()=>{var v;this.count>0&&this.tasks.length>0&&(this.count--,(v=this.tasks.shift())===null||v===void 0||v())},this.count=d}acquire(){return new Promise((d,v)=>{this.tasks.push(()=>{let y=!1;d(()=>{y||(y=!0,this.count++,this.sched())})}),l(this.sched)})}releaseAll(){for(var d;this.tasks.length>0;)(d=this.tasks.shift())===null||d===void 0||d()}}e.Semaphore=a;function c(h){const d=document.createTextNode("");let v,y,R=0,M=0;return new h(function(){let g;if(v)y&&(v=y.slice(M).concat(v));else{if(!y)return;v=y}if(y=v,v=null,M=0,typeof y=="function"){g=y,y=null,g();return}for(d.data=R=++R%2;M<y.length;)g=y[M],M++,M===y.length&&(y=null),g()}).observe(d,{characterData:!0}),function(g){if(v){typeof v=="function"?v=[v,g]:v.push(g);return}v=g,d.data=R=++R%2}}const l=function(){if(typeof queueMicrotask=="function")return queueMicrotask;if(typeof document=="object"&&document){if(typeof MutationObserver=="function")return c(MutationObserver);if(typeof window.WebKitMutationObserver=="function")return c(window.WebKitMutationObserver)}if(typeof setImmediate=="function")return setImmediate;if(typeof setTimeout=="function"||typeof setTimeout=="object")return function(h){setTimeout(h,0)};throw new Error("No `nextTick` implementation found")}();e.LT_COLLATOR=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function f(h,d,v){if(v.batchType==="old")return h.push(...d),h;if(h.length===0)return h.push(...d),h;let y=0;for(;y<h.length&&e.LT_COLLATOR.compare(h[y].id.lt,v.maxLt)>=0;)++y;return h.splice(y,0,...d),h}e.mergeTransactions=f;const b=4294967295;let _=Math.floor(Math.random()*b);function P(){return _=(_+1)%b,_}e.getUniqueId=P})(ae);Object.defineProperty(E,"__esModule",{value:!0});E.parsePartialTokensObject=E.parseTokensObject=E.serializeTokensObject=E.parseAccountInteraction=E.parsePermissions=E.parseMessage=E.serializeMessage=E.parseTransaction=E.serializeTransaction=void 0;const ve=ae;function fi(e){return{id:{hash:e.id.hash,lt:e.id.lt},prevTransactionId:e.prevTransactionId!=null?{hash:e.prevTransactionId.hash,lt:e.prevTransactionId.lt}:void 0,createdAt:e.createdAt,aborted:e.aborted,exitCode:e.exitCode,resultCode:e.resultCode,origStatus:e.origStatus,endStatus:e.endStatus,totalFees:e.totalFees,inMessage:qe(e.inMessage),outMessages:e.outMessages.map(qe)}}E.serializeTransaction=fi;function vi(e){return{...e,inMessage:Ke(e.inMessage),outMessages:e.outMessages.map(Ke)}}E.parseTransaction=vi;function qe(e){return{hash:e.hash,src:e.src?e.src.toString():void 0,dst:e.dst?e.dst.toString():void 0,value:e.value,bounce:e.bounce,bounced:e.bounced,body:e.body,bodyHash:e.bodyHash}}E.serializeMessage=qe;function Ke(e){return{...e,src:e.src?new ve.Address(e.src):void 0,dst:e.dst?new ve.Address(e.dst):void 0}}E.parseMessage=Ke;function mi(e){return{...e,accountInteraction:e.accountInteraction?zt(e.accountInteraction):void 0}}E.parsePermissions=mi;function zt(e){return{...e,address:new ve.Address(e.address)}}E.parseAccountInteraction=zt;function bi(e){return We(e)}E.serializeTokensObject=bi;function We(e){if(typeof e=="object"&&(0,ve.isAddressObject)(e))return e.toString();if(Array.isArray(e)){const t=[];for(const n of e)t.push(We(n));return t}else if(e!=null&&typeof e=="object"){const t={};for(const[n,s]of Object.entries(e))t[n]=We(s);return t}else return e}function gi(e,t){const n={};for(const s of e)n[s.name]=X(s,t[s.name]);return n}E.parseTokensObject=gi;function yi(e,t){const n={};for(const s of e)Object.prototype.hasOwnProperty.call(t,s.name)&&(n[s.name]=X(s,!t[s.name]));return n}E.parsePartialTokensObject=yi;function X(e,t){if(e.type.startsWith("map")){const n=e.type.indexOf(","),s=e.type.slice(4,n),r=e.type.slice(n+1,-1),i=[];for(const[a,c]of t)i.push([X({name:"",type:s},a),X({name:"",type:r,components:e.components},c)]);return i}else{const n=e.type.endsWith("[]"),s=!n&&e.type.startsWith("optional"),r=n?e.type.slice(0,-2):s?e.type.slice(9,-1):e.type;if(n){const i={name:e.name,type:r,components:e.components},a=[];for(const c of t)a.push(X(i,c));return a}else if(s){if(t==null)return null;{const i={name:e.name,type:r,components:e.components};return X(i,t)}}else if(r==="tuple"){const i={};if(e.components!=null)for(const a of e.components)i[a.name]=X(a,t[a.name]);return i}else return r==="address"?new ve.Address(t):t}}var me={};Object.defineProperty(me,"__esModule",{value:!0});me.Subscriber=void 0;const ue=ae,wi=E;class _i{constructor(t){this.provider=t,this.subscriptions=new Map,this.scanners=new Map,this.unsubscribe=async()=>this._unsubscribe()}transactions(t){return this._addSubscription("transactionsFound",t,!1)}trace(t){const n=(0,ue.getUniqueId)();return new j((s,r)=>{const i=new Pi(this.provider,{origin:t,onData:s,onEnd:a=>{this.scanners.delete(n),r(a)}});return this.scanners.set(n,i),i.start(),Promise.resolve()},async()=>{const s=this.scanners.get(n);s!=null&&(this.scanners.delete(n),await s.stop())},$e,!0)}oldTransactions(t,n){const s=(0,ue.getUniqueId)();return new j((r,i)=>{const a=new Ti(this.provider,{address:t,onData:r,onEnd:c=>{this.scanners.delete(s),i(c)},...n});return this.scanners.set(s,a),a.start(),Promise.resolve()},async()=>{const r=this.scanners.get(s);r!=null&&(this.scanners.delete(s),await r.stop())},$e,!0)}states(t){return this._addSubscription("contractStateChanged",t,!1)}async _unsubscribe(){const t=[];for(const n of this.subscriptions.values())for(const[s,r]of Object.entries(n))delete n[s],r!=null&&t.push(r.subscription.then(i=>i.unsubscribe()).catch(()=>{}));this.subscriptions.clear();for(const n of this.scanners.values())t.push(n.stop());this.scanners.clear(),await Promise.all(t)}_addSubscription(t,n,s){const r=n.toString(),i=c=>{const l=this.subscriptions.get(r);if(l==null)return;const f=l[t];if(f!=null){const b=f.handlers.get(c);if(b!=null){f.handlers.delete(c);const{queue:_,onEnd:P,state:h}=b;h.finished||(h.finished=!0,_.clear(),_.enqueue(async()=>P(h.eof)))}if(f.handlers.size===0){const _=f.subscription;delete l[t],_.then(P=>P.unsubscribe()).catch(console.debug)}}l.contractStateChanged==null&&l.transactionsFound==null&&this.subscriptions.delete(r)},a=(0,ue.getUniqueId)();return new j((c,l)=>{const f=this.subscriptions.get(r);let b=f==null?void 0:f[t];const _={eof:!1,finished:!1},P={onData:c,onEnd:l,queue:new et,state:_};if(b!=null)return b.handlers.set(a,P),Promise.resolve();const h=new Map;h.set(a,P);const d=this.provider.subscribe(t,{address:n}).then(v=>(v.on("data",y=>{for(const{onData:R,queue:M,state:g}of h.values())g.eof||g.finished||M.enqueue(async()=>{await R(y)||(g.eof=!0,i(a))})}),v.on("unsubscribed",()=>{for(const y of h.keys())i(y)}),v)).catch(v=>{console.error(v);for(const y of h.keys())i(y);throw v});return b={subscription:d,handlers:h},f==null?this.subscriptions.set(r,{[t]:b}):f[t]=b,d.then(()=>{})},()=>i(a),$e,s)}}me.Subscriber=_i;async function $e(e,t){return t(e)}class j{constructor(t,n,s,r){this.makeProducer=t,this.stopProducer=n,this.extractor=s,this.isFinite=r,this.fold=this.onlyFinite((i,a,c)=>{let l=i;return new Promise((f,b)=>{const _=this.makeProducer(P=>this.extractor(P,async h=>(l=await a(l,h),!0)),P=>{P?f(l):b(new Error("Subscription closed"))});c!=null&&(c.subscribed=_)})}),this.finished=this.onlyFinite(i=>new Promise((a,c)=>{const l=this.makeProducer(f=>this.extractor(f,b=>!0),f=>{f?a(void 0):c(new Error("Subscription closed"))});i!=null&&(i.subscribed=l)}))}async delayed(t){const{subscribed:n,result:s}=t({first:()=>{const r={},i=this.first(r);return{subscribed:r.subscribed,result:i}},on:r=>{const i={};return this.on(r,i),{subscribed:i.subscribed,result:void 0}},fold:this.fold!=null?(r,i)=>{const a={},c=this.fold(r,i,a);return{subscribed:a.subscribed,result:c}}:void 0,finished:this.finished!=null?()=>{const r={},i=this.finished(r);return{subscribed:r.subscribed,result:i}}:void 0});return await n,()=>s}first(t){const n={found:!1};return new Promise((s,r)=>{const i=this.makeProducer(a=>this.extractor(a,c=>(Object.assign(n,{found:!0,result:c}),!1)),a=>{a?this.isFinite?s(n.found?n.result:void 0):n.found?s(n.result):r(new Error("Unexpected end of stream")):r(new Error("Subscription closed"))});t!=null&&(t.subscribed=i)})}on(t,n){const s=this.makeProducer(r=>this.extractor(r,async i=>(await t(i),!0)),r=>{});n!=null&&(n.subscribed=s)}merge(t){return new j((n,s)=>{const r={stopped:!1,counter:0},i=a=>{r.stopped||(++r.counter==2||!a)&&(r.stopped=!0,s(a))};return Promise.all([this.makeProducer(n,i),t.makeProducer(n,i)]).then(()=>{})},()=>{this.stopProducer(),t.stopProducer()},this.extractor,this.isFinite&&t.isFinite)}enumerate(){const t={index:0};return new j(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async r=>s({index:t.index++,item:r})),this.isFinite)}tap(t){return new j(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async r=>(await t(r),s(r))),this.isFinite)}filter(t){return new j(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async r=>await t(r)?s(r):!0),this.isFinite)}filterMap(t){return new j(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async r=>{const i=await t(r);return i!==void 0?s(i):!0}),this.isFinite)}map(t){return new j(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async r=>{const i=await t(r);return s(i)}),this.isFinite)}flatMap(t){return new j(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async r=>{const i=await t(r);for(const a of i)if(!await s(a))return!1;return!0}),this.isFinite)}skip(t){const n={index:0};return new j(this.makeProducer,this.stopProducer,(s,r)=>this.extractor(s,i=>n.index>=t?r(i):(++n.index,!0)),this.isFinite)}skipWhile(t){const n={shouldSkip:!0};return new j(this.makeProducer,this.stopProducer,(s,r)=>this.extractor(s,async i=>!n.shouldSkip||!await t(i)?(n.shouldSkip=!1,r(i)):!0),this.isFinite)}take(t){const n={index:0};return new j(this.makeProducer,this.stopProducer,(s,r)=>this.extractor(s,i=>n.index<t?(++n.index,r(i)):!1),!0)}takeWhile(t){return new j(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async r=>await t(r)?s(r):!1),!0)}takeWhileMap(t){return new j(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async r=>{const i=await t(r);return i!==void 0?s(i):!1}),!0)}onlyFinite(t){if(this.isFinite)return t}}class Ti{constructor(t,n){this.provider=t,this.params=n,this.queue=new et,this.isRunning=!1}start(){this.isRunning||this.promise!=null||(this.isRunning=!0,this.promise=(async()=>{const t=this.params,n={complete:!1};for(;this.isRunning&&!n.complete;)try{const{transactions:s,continuation:r}=await this.provider.getTransactions({address:this.params.address,continuation:this.continuation});if(n.complete=!n.complete&&s.length==null,!this.isRunning||n.complete)break;const i=s.filter(c=>(t.fromLt==null||ue.LT_COLLATOR.compare(c.id.lt,t.fromLt)>0)&&(t.fromUtime==null||c.createdAt>t.fromUtime));if(i.length==0){n.complete=!0;break}const a={maxLt:i[0].id.lt,minLt:i[i.length-1].id.lt,batchType:"old"};if(this.queue.enqueue(async()=>{await this.params.onData({address:this.params.address,transactions:i,info:a})||(n.complete=!0,this.isRunning=!1)}),r!=null)this.continuation=r;else{n.complete=!0;break}}catch(s){console.error(s)}this.queue.enqueue(async()=>this.params.onEnd(n.complete)),this.isRunning=!1,this.continuation=void 0})())}async stop(){this.isRunning=!1,this.queue.clear(),this.promise!=null?await this.promise:this.params.onEnd(!1)}}class Pi{constructor(t,n){this.provider=t,this.params=n,this.queue=new et,this.isRunning=!1,this.semaphore=new ue.Semaphore(10)}start(){if(this.isRunning||this.promise!=null)return;const t=this.provider;this.isRunning=!0,this.promise=(async()=>{const n={complete:!1},s=i=>{const a={stopped:!1};return{promise:(async()=>{let f=500;for(;;){const b=await this.semaphore.acquire();if(a.stopped){b();return}const _=await t.rawApi.findTransaction({inMessageHash:i}).catch(()=>({transaction:void 0})).finally(()=>b());if(a.stopped)return;if(_.transaction!=null){const d=(0,wi.parseTransaction)(_.transaction);return d.account=d.inMessage.dst,d}let P;const h=new Promise((d,v)=>{P=()=>d(),a.reject=()=>v()});if(a.timeout=setTimeout(P,f),await h,a.stopped)return;a.reject=void 0,f=Math.min(f*2,3e3)}})(),reject:()=>{var f;a.stopped=!0,(f=a.reject)===null||f===void 0||f.call(a),a.timeout!=null&&clearTimeout(a.timeout)}}},r=[this.params.origin];try{e:for(;this.isRunning;){const i=r.shift();if(i==null){n.complete=!0;break}const a=i.outMessages.filter(c=>c.dst!=null).map(c=>{const l=c.hash;return s(l)});this.pendingTransactions=a;for(const{promise:c}of a){const l=await c;if(!this.isRunning||n.complete||l==null)break e;this.queue.enqueue(async()=>{await this.params.onData(l)||(n.complete=!0,this.isRunning=!1,this.rejectPendingTransactions())}),r.push(l)}this.pendingTransactions=void 0}}catch(i){console.error(i)}finally{this.queue.enqueue(async()=>this.params.onEnd(n.complete)),this.isRunning=!1,this.rejectPendingTransactions()}})()}async stop(){this.isRunning=!1,this.queue.clear(),this.rejectPendingTransactions(),this.promise!=null?await this.promise:this.params.onEnd(!1)}rejectPendingTransactions(){if(this.pendingTransactions!=null){for(const t of this.pendingTransactions)t.reject();this.pendingTransactions=void 0}this.semaphore.releaseAll()}}class et{constructor(){this.queue=[],this.workingOnPromise=!1}enqueue(t){this.queue.push(t),this._dequeue().catch(()=>{})}clear(){this.queue.length=0}async _dequeue(){if(this.workingOnPromise)return;const t=this.queue.shift();t&&(this.workingOnPromise=!0,t().then(()=>{this.workingOnPromise=!1,this._dequeue()}).catch(()=>{this.workingOnPromise=!1,this._dequeue()}))}}var se={};Object.defineProperty(se,"__esModule",{value:!0});se.TvmException=se.Contract=void 0;const ie=ae,I=E;class Ci{constructor(t,n,s){if(!Array.isArray(n.functions))throw new Error("Invalid abi. Functions array required");if(!Array.isArray(n.events))throw new Error("Invalid abi. Events array required");this._provider=t,this._abi=JSON.stringify(n),this.methodsAbi=n.functions.reduce((r,i)=>(i.inputs==null&&(i.inputs=[]),i.outputs==null&&(i.outputs=[]),r[i.name]=i,r),{}),this.eventsAbi=n.events.reduce((r,i)=>(i.inputs==null&&(i.inputs=[]),r[i.name]=i,r),{}),this.fieldsAbi=n.fields,this._address=s,this._methods=new Proxy({},{get:(r,i)=>{const a=this.methodsAbi[i];return(c={})=>new Oi(this._provider,a,this._abi,this._address,i,c)}}),this._fields=new Proxy({},{get:(r,i)=>async(a={})=>{await this._provider.ensureInitialized();const{fields:c,state:l}=await this._provider.rawApi.getContractFields({address:this._address.toString(),abi:this._abi,cachedState:a==null?void 0:a.cachedState,allowPartial:(a==null?void 0:a.allowPartial)==null?!1:a.allowPartial});if(c==null)throw l==null?new Error("Account does not exist"):l.isDeployed?new Error("Invalid account data"):new Error("Account is not deployed");const f=(0,I.parseTokensObject)(this.fieldsAbi,c);if(f==null||!Object.prototype.hasOwnProperty.call(f,i))throw new Error("Unknown field");return f[i]}})}get methods(){return this._methods}get fields(){return this._fields}get address(){return this._address}get abi(){return this._abi}async getFullState(){return await this._provider.ensureInitialized(),await this._provider.rawApi.getFullContractState({address:this.address.toString()})}async getFields(t={}){await this._provider.ensureInitialized();const{fields:n,state:s}=await this._provider.rawApi.getContractFields({address:this.address.toString(),abi:this._abi,cachedState:t.cachedState,allowPartial:t.allowPartial==null?!1:t.allowPartial});return{fields:n!=null?(0,I.parseTokensObject)(this.fieldsAbi,n):void 0,state:s}}transactions(t){return t.transactions(this._address).flatMap(({transactions:n})=>n)}events(t){return t.transactions(this._address).flatMap(({transactions:n})=>n).flatMap(n=>this.decodeTransactionEvents({transaction:n}).then(s=>(s.forEach(r=>r.transaction=n),s)))}async waitForEvent(t={}){const{range:n,filter:s}=t,r=typeof s=="string"?({event:l})=>l===s:s;let i=t.subscriber;const a=i==null;i==null&&(i=new this._provider.Subscriber);const c=await((n==null?void 0:n.fromLt)!=null||(n==null?void 0:n.fromUtime)!=null?i.oldTransactions(this._address,n).merge(i.transactions(this._address)):i.transactions(this.address)).flatMap(l=>l.transactions).takeWhile(l=>n==null||(n.fromLt==null||ie.LT_COLLATOR.compare(l.id.lt,n.fromLt)>0)&&(n.fromUtime==null||l.createdAt>n.fromUtime)&&(n.toLt==null||ie.LT_COLLATOR.compare(l.id.lt,n.toLt)<0)&&(n.toUtime==null||l.createdAt<n.toUtime)).flatMap(l=>this.decodeTransactionEvents({transaction:l}).then(f=>(f.forEach(b=>b.transaction=l),f))).filterMap(async l=>{if(r==null||await r(l))return l}).first();return a&&await i.unsubscribe(),c}async getPastEvents(t){const{range:n,filter:s,limit:r}=t,i=typeof s=="string"?({event:l})=>l===s:s,a=[];let c=t==null?void 0:t.continuation;e:for(;;){const{transactions:l,continuation:f}=await this._provider.getTransactions({address:this._address,continuation:c});if(l.length===null)break;const b=l.filter(_=>((n==null?void 0:n.fromLt)==null||ie.LT_COLLATOR.compare(_.id.lt,n.fromLt)>0)&&((n==null?void 0:n.fromUtime)==null||_.createdAt>n.fromUtime)&&((n==null?void 0:n.toLt)==null||ie.LT_COLLATOR.compare(_.id.lt,n.toLt)<0)&&((n==null?void 0:n.toUtime)==null||_.createdAt<n.toUtime));if(b.length>0){const _=await Promise.all(b.map(async P=>({tx:P,events:await this.decodeTransactionEvents({transaction:P}).then(h=>(h.forEach(d=>d.transaction=P),h))})));for(let{tx:P,events:h}of _){i!=null&&(h=await Promise.all(h.map(async d=>await i(d)?d:void 0)).then(d=>d.filter(v=>v!=null))),c=P.id;for(const d of h){if(r!=null&&a.length>=r)break e;a.push(d)}if(r!=null&&a.length>=r)break e}}if(c=f,c==null)break}return{events:a,continuation:c}}async decodeTransaction(t){await this._provider.ensureInitialized();try{const n=await this._provider.rawApi.decodeTransaction({transaction:(0,I.serializeTransaction)(t.transaction),abi:this._abi,method:t.methods});if(n==null)return;const{method:s,input:r,output:i}=n,a=this.methodsAbi[s];return{method:s,input:a.inputs!=null?(0,I.parseTokensObject)(a.inputs,r):{},output:a.outputs!=null?(0,I.parseTokensObject)(a.outputs,i):{}}}catch{return}}async decodeTransactionEvents(t){await this._provider.ensureInitialized();try{const{events:n}=await this._provider.rawApi.decodeTransactionEvents({transaction:(0,I.serializeTransaction)(t.transaction),abi:this._abi}),s=[];for(const{event:r,data:i}of n){const a=this.eventsAbi[r];s.push({event:r,data:a.inputs!=null?(0,I.parseTokensObject)(a.inputs,i):{}})}return s}catch{return[]}}async decodeInputMessage(t){await this._provider.ensureInitialized();try{const n=await this._provider.rawApi.decodeInput({abi:this._abi,body:t.body,internal:t.internal,method:t.methods});if(n==null)return;const{method:s,input:r}=n,i=this.methodsAbi[s];return{method:s,input:i.inputs!=null?(0,I.parseTokensObject)(i.inputs,r):{}}}catch{return}}async decodeOutputMessage(t){await this._provider.ensureInitialized();try{const n=await this._provider.rawApi.decodeOutput({abi:this._abi,body:t.body,method:t.methods});if(n==null)return;const{method:s,output:r}=n,i=this.methodsAbi[s];return{method:s,output:i.outputs!=null?(0,I.parseTokensObject)(i.outputs,r):{}}}catch{return}}async decodeEvent(t){await this._provider.ensureInitialized();try{const n=await this._provider.rawApi.decodeEvent({abi:this.abi,body:t.body,event:t.events});if(n==null)return;const{event:s,data:r}=n,i=this.eventsAbi[s];return{event:s,data:i.inputs!=null?(0,I.parseTokensObject)(i.inputs,r):{}}}catch{return}}}se.Contract=Ci;class Vt extends Error{constructor(t){super(`TvmException: ${t}`),this.code=t}}se.TvmException=Vt;class Oi{constructor(t,n,s,r,i,a){this.provider=t,this.functionAbi=n,this.abi=s,this.address=r,this.method=i,this.params=(0,I.serializeTokensObject)(a)}async send(t){await this.provider.ensureInitialized();const{transaction:n}=await this.provider.rawApi.sendMessage({sender:t.from.toString(),recipient:this.address.toString(),amount:t.amount,bounce:t.bounce==null?!0:t.bounce,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:t.stateInit});return(0,I.parseTransaction)(n)}async sendDelayed(t){await this.provider.ensureInitialized();const n=new ie.DelayedTransactions,s=await this.provider.subscribe("messageStatusUpdated");s.on("data",a=>{a.address.equals(t.from)&&n.fillTransaction(a.hash,a.transaction)});const{message:r}=await this.provider.rawApi.sendMessageDelayed({sender:t.from.toString(),recipient:this.address.toString(),amount:t.amount,bounce:t.bounce==null?!0:t.bounce,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:t.stateInit}).catch(a=>{throw s.unsubscribe().catch(console.error),a}),i=n.waitTransaction(this.address,r.hash).finally(()=>s.unsubscribe().catch(console.error));return{messageHash:r.hash,expireAt:r.expireAt,transaction:i}}async sendWithResult(t){await this.provider.ensureInitialized();let n=t.subscriber;const s=n==null;n==null&&(n=new this.provider.Subscriber);try{let r,i;const a=new Promise(h=>{i=d=>h(d)}),c=[];n.transactions(this.address).flatMap(h=>h.transactions).filter(h=>{var d;return((d=h.inMessage.src)===null||d===void 0?void 0:d.equals(t.from))||!1}).on(h=>{r==null?c.push(h):r.possibleMessages.findIndex(d=>d.hash==h.inMessage.hash)>=0&&(i==null||i(h))});const l=await this.send(t),f=l.outMessages.filter(h=>{var d;return((d=h.dst)===null||d===void 0?void 0:d.equals(this.address))||!1});r={transaction:l,possibleMessages:f};const b=c.find(h=>f.findIndex(d=>d.hash==h.inMessage.hash)>=0);b!=null&&(i==null||i(b));const _=await a;let P;try{const h=await this.provider.rawApi.decodeTransaction({transaction:(0,I.serializeTransaction)(_),abi:this.abi,method:this.method});h!=null&&(P=this.functionAbi.outputs!=null?(0,I.parseTokensObject)(this.functionAbi.outputs,h.output):{})}catch(h){console.error(h)}return{parentTransaction:r.transaction,childTransaction:_,output:P}}finally{s&&await n.unsubscribe()}}async estimateFees(t){await this.provider.ensureInitialized();const{fees:n}=await this.provider.rawApi.estimateFees({sender:t.from.toString(),recipient:this.address.toString(),amount:t.amount,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:t.stateInit});return n}async sendExternal(t){await this.provider.ensureInitialized();const n=t.withoutSignature===!0?this.provider.rawApi.sendUnsignedExternalMessage:this.provider.rawApi.sendExternalMessage,{transaction:s,output:r}=await n({publicKey:t.publicKey,recipient:this.address.toString(),stateInit:t.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},local:t.local,executorParams:t.executorParams?{disableSignatureCheck:t.executorParams.disableSignatureCheck,overrideBalance:t.executorParams.overrideBalance}:void 0});return{transaction:(0,I.parseTransaction)(s),output:r!=null?(0,I.parseTokensObject)(this.functionAbi.outputs,r):void 0}}async sendExternalDelayed(t){await this.provider.ensureInitialized();const n=new ie.DelayedTransactions,s=await this.provider.subscribe("messageStatusUpdated");s.on("data",a=>{a.address.equals(this.address)&&n.fillTransaction(a.hash,a.transaction)});const{message:r}=await this.provider.rawApi.sendExternalMessageDelayed({publicKey:t.publicKey,recipient:this.address.toString(),stateInit:t.stateInit,payload:{abi:this.abi,method:this.method,params:this.params}}).catch(a=>{throw s.unsubscribe().catch(console.error),a}),i=n.waitTransaction(this.address,r.hash).finally(()=>s.unsubscribe().catch(console.error));return{messageHash:r.hash,expireAt:r.expireAt,transaction:i}}async call(t={}){await this.provider.ensureInitialized();const{output:n,code:s}=await this.provider.rawApi.runLocal({address:this.address.toString(),cachedState:t.cachedState,responsible:t.responsible,functionCall:{abi:this.abi,method:this.method,params:this.params}});if(n==null||s!=0)throw new Vt(s);return(0,I.parseTokensObject)(this.functionAbi.outputs,n)}async executeExternal(t){await this.provider.ensureInitialized();const{transaction:n,newState:s,output:r}=await this.provider.rawApi.executeLocal({address:this.address.toString(),cachedState:t.cachedState,stateInit:t.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},messageHeader:{type:"external",publicKey:t.publicKey,withoutSignature:t.withoutSignature},executorParams:t.executorParams!=null?{disableSignatureCheck:t.executorParams.disableSignatureCheck,overrideBalance:t.executorParams.overrideBalance}:void 0});return{transaction:(0,I.parseTransaction)(n),newState:s,output:r!==void 0?(0,I.parseTokensObject)(this.functionAbi.outputs,r):void 0}}async executeInternal(t){await this.provider.ensureInitialized();const{transaction:n,newState:s,output:r}=await this.provider.rawApi.executeLocal({address:this.address.toString(),cachedState:t.cachedState,stateInit:t.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},messageHeader:{type:"internal",sender:t.sender.toString(),amount:t.amount,bounce:t.bounce!=null?t.bounce:!1,bounced:t.bounced},executorParams:t.executorParams!=null?{disableSignatureCheck:t.executorParams.disableSignatureCheck,overrideBalance:t.executorParams.overrideBalance}:void 0});return{transaction:(0,I.parseTransaction)(n),newState:s,output:r!==void 0?(0,I.parseTokensObject)(this.functionAbi.outputs,r):void 0}}async encodeInternal(){await this.provider.ensureInitialized();const{boc:t}=await this.provider.rawApi.encodeInternalInput({abi:this.abi,method:this.method,params:this.params});return t}}var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});(function(e){var t=Y&&Y.__createBinding||(Object.create?function(g,o,u,p){p===void 0&&(p=u);var w=Object.getOwnPropertyDescriptor(o,u);(!w||("get"in w?!o.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return o[u]}}),Object.defineProperty(g,p,w)}:function(g,o,u,p){p===void 0&&(p=u),g[p]=o[u]}),n=Y&&Y.__setModuleDefault||(Object.create?function(g,o){Object.defineProperty(g,"default",{enumerable:!0,value:o})}:function(g,o){g.default=o}),s=Y&&Y.__importStar||function(g){if(g&&g.__esModule)return g;var o={};if(g!=null)for(var u in g)u!=="default"&&Object.prototype.hasOwnProperty.call(g,u)&&t(o,g,u);return n(o,g),o},r=Y&&Y.__exportStar||function(g,o){for(var u in g)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&t(o,g,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.ProviderNotInitializedException=e.ProviderNotFoundException=e.ProviderRpcClient=e.hasEverscaleProvider=e.LT_COLLATOR=e.isAddressObject=e.mergeTransactions=e.MessageExpiredException=e.AddressLiteral=e.Address=e.Subscriber=void 0;const i=E,a=ae,c=s(me),l=s(se);r(Ft,e),r(E,e),r(se,e);var f=me;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return f.Subscriber}});var b=ae;Object.defineProperty(e,"Address",{enumerable:!0,get:function(){return b.Address}}),Object.defineProperty(e,"AddressLiteral",{enumerable:!0,get:function(){return b.AddressLiteral}}),Object.defineProperty(e,"MessageExpiredException",{enumerable:!0,get:function(){return b.MessageExpiredException}}),Object.defineProperty(e,"mergeTransactions",{enumerable:!0,get:function(){return b.mergeTransactions}}),Object.defineProperty(e,"isAddressObject",{enumerable:!0,get:function(){return b.isAddressObject}}),Object.defineProperty(e,"LT_COLLATOR",{enumerable:!0,get:function(){return b.LT_COLLATOR}});const _=typeof window<"u"&&typeof window.document<"u";let P;!_||document.readyState==="complete"?P=Promise.resolve():P=new Promise(g=>{window.addEventListener("load",()=>{g()})});const h=()=>_?window.__ever||window.ton:void 0;async function d(){return _?(await P,window.__hasEverscaleProvider===!0||window.hasTonProvider===!0):!1}e.hasEverscaleProvider=d;class v{constructor(o={}){this._subscriptions={connected:new Map,disconnected:new Map,transactionsFound:new Map,contractStateChanged:new Map,messageStatusUpdated:new Map,networkChanged:new Map,permissionsChanged:new Map,loggedOut:new Map},this._contractSubscriptions=new Map,this._properties=o;const u=this;class p extends l.Contract{constructor(O,A){super(u,O,A)}}this.Contract=p;class w extends c.Subscriber{constructor(){super(u)}}this.Subscriber=w,this._api=new Proxy({},{get:(S,O)=>A=>{if(this._provider!=null)return this._provider.request({method:O,params:A});throw new R}}),o.forceUseFallback===!0?this._initializationPromise=o.fallback!=null?o.fallback().then(S=>{this._provider=S}):Promise.resolve():(this._provider=h(),this._provider!=null?this._initializationPromise=Promise.resolve():this._initializationPromise=d().then(S=>new Promise(O=>{if(!S)return O();if(this._provider=h(),this._provider!=null)O();else{const A=window.__hasEverscaleProvider===!0?"ever#initialized":"ton#initialized";window.addEventListener(A,D=>{this._provider=h(),O()})}})).then(async()=>{this._provider==null&&o.fallback!=null&&(this._provider=await o.fallback())})),this._initializationPromise.then(()=>{this._provider!=null&&this._registerEventHandlers(this._provider)})}async hasProvider(){return this._properties.fallback!=null?!0:d()}async ensureInitialized(){if(await this._initializationPromise,this._provider==null)throw new y}get isInitialized(){return this._provider!=null}get raw(){if(this._provider!=null)return this._provider;throw new R}get rawApi(){return this._api}createContract(o,u){return new this.Contract(o,u)}createSubscriber(){return new this.Subscriber}async requestPermissions(o){await this.ensureInitialized();const u=await this._api.requestPermissions({permissions:o.permissions});return(0,i.parsePermissions)(u)}async changeAccount(){await this.ensureInitialized(),await this._api.changeAccount()}async disconnect(){await this.ensureInitialized(),await this._api.disconnect()}async subscribe(o,u){class p{constructor(A,D){this._subscribe=A,this._unsubscribe=D,this._listeners={data:[],subscribed:[],unsubscribed:[]},this._subscribed=!1,this.subscribe=async()=>{if(!this._subscribed){this._subscribed=!0,await this._subscribe(this);for(const x of this._listeners.subscribed)x()}},this.unsubscribe=async()=>{if(this._subscribed){this._subscribed=!1,await this._unsubscribe();for(const x of this._listeners.unsubscribed)x()}}}on(A,D){return this._listeners[A].push(D),this}notify(A){for(const D of this._listeners.data)D(A)}}const w=this._subscriptions[o],S=(0,a.getUniqueId)();switch(o){case"connected":case"disconnected":case"messageStatusUpdated":case"networkChanged":case"permissionsChanged":case"loggedOut":{const O=new p(async A=>{w.has(S)||w.set(S,D=>{A.notify(D)})},async()=>{w.delete(S)});return await O.subscribe(),O}case"transactionsFound":case"contractStateChanged":{if(u==null)throw new Error("Address must be specified for the subscription");await this.ensureInitialized();const O=u.address.toString(),A=new p(async D=>{if(w.has(S))return;w.set(S,ye=>{ye.address.toString()===O&&D.notify(ye)});let x=this._contractSubscriptions.get(O);x==null&&(x=new Map,this._contractSubscriptions.set(O,x));const oe={state:o==="contractStateChanged",transactions:o==="transactionsFound"};x.set(S,oe);const{total:K,withoutExcluded:nt}=M(x.values(),oe);try{(K.transactions!==nt.transactions||K.state!==nt.state)&&await this.rawApi.subscribe({address:O,subscriptions:K})}catch(ye){throw w.delete(S),x.delete(S),ye}},async()=>{w.delete(S);const D=this._contractSubscriptions.get(O);if(D==null)return;const x=D.get(S),{total:oe,withoutExcluded:K}=M(D.values(),x);D.delete(S),!K.transactions&&!K.state?await this.rawApi.unsubscribe({address:O}):(oe.transactions!==K.transactions||oe.state!==K.state)&&await this.rawApi.subscribe({address:O,subscriptions:K})});return await A.subscribe(),A}default:throw new Error(`Unknown event ${o}`)}}async getProviderState(){await this.ensureInitialized();const o=await this._api.getProviderState();return{...o,permissions:(0,i.parsePermissions)(o.permissions)}}async getBalance(o){const{state:u}=await this.getFullContractState({address:o});return u==null?"0":u==null?void 0:u.balance}async getFullContractState(o){return await this.ensureInitialized(),await this._api.getFullContractState({address:o.address.toString()})}async getAccountsByCodeHash(o){await this.ensureInitialized();const{accounts:u,continuation:p}=await this._api.getAccountsByCodeHash({...o});return{accounts:u.map(w=>new a.Address(w)),continuation:p}}async getTransactions(o){await this.ensureInitialized();const{transactions:u,continuation:p,info:w}=await this._api.getTransactions({...o,address:o.address.toString()});return{transactions:u.map(i.parseTransaction),continuation:p,info:w}}async getTransaction(o){await this.ensureInitialized();const{transaction:u}=await this._api.getTransaction({...o});return{transaction:u?(0,i.parseTransaction)(u):void 0}}async getExpectedAddress(o,u){const{address:p}=await this.getStateInit(o,u);return p}async getStateInit(o,u){await this.ensureInitialized();const{address:p,stateInit:w,hash:S}=await this._api.getExpectedAddress({abi:JSON.stringify(o),...u,initParams:(0,i.serializeTokensObject)(u.initParams)});return{address:new a.Address(p),stateInit:w,hash:S}}async unpackInitData(o,u){await this.ensureInitialized();const{publicKey:p,initParams:w}=await this._api.unpackInitData({abi:JSON.stringify(o),data:u});return{publicKey:p,initParams:(0,i.parsePartialTokensObject)(o.data,w)}}async getBocHash(o){return await this.ensureInitialized(),await this._api.getBocHash({boc:o}).then(({hash:u})=>u)}async packIntoCell(o){return await this.ensureInitialized(),await this._api.packIntoCell({abiVersion:o.abiVersion,structure:o.structure,data:(0,i.serializeTokensObject)(o.data)})}async unpackFromCell(o){await this.ensureInitialized();const{data:u}=await this._api.unpackFromCell({...o,structure:o.structure});return{data:(0,i.parseTokensObject)(o.structure,u)}}async extractPublicKey(o){await this.ensureInitialized();const{publicKey:u}=await this._api.extractPublicKey({boc:o});return u}async codeToTvc(o){await this.ensureInitialized();const{tvc:u}=await this._api.codeToTvc({code:o});return u}async mergeTvc(o){return await this.ensureInitialized(),await this._api.mergeTvc(o)}async splitTvc(o){return await this.ensureInitialized(),await this._api.splitTvc({tvc:o})}async setCodeSalt(o){let u;if(typeof o.salt=="string")await this.ensureInitialized(),u=o.salt;else{const{boc:p}=await this.packIntoCell(o.salt);u=p}return await this._api.setCodeSalt({code:o.code,salt:u})}async getCodeSalt(o){await this.ensureInitialized();const{salt:u}=await this.rawApi.getCodeSalt({code:o.code});return u}async addAsset(o){await this.ensureInitialized();let u;switch(o.type){case"tip3_token":{u={rootContract:o.params.rootContract.toString()};break}default:throw new Error("Unknown asset type")}return await this._api.addAsset({account:o.account.toString(),type:o.type,params:u})}async verifySignature(o){return await this.ensureInitialized(),await this._api.verifySignature(o)}async signData(o){return await this.ensureInitialized(),await this._api.signData(o)}async signDataRaw(o){return await this.ensureInitialized(),await this._api.signDataRaw(o)}async encryptData(o){await this.ensureInitialized();const{encryptedData:u}=await this._api.encryptData(o);return u}async decryptData(o){await this.ensureInitialized();const{data:u}=await this._api.decryptData({encryptedData:o});return u}async sendMessage(o){await this.ensureInitialized();const{transaction:u}=await this._api.sendMessage({sender:o.sender.toString(),recipient:o.recipient.toString(),amount:o.amount,bounce:o.bounce,payload:o.payload?{abi:o.payload.abi,method:o.payload.method,params:(0,i.serializeTokensObject)(o.payload.params)}:void 0,stateInit:o.stateInit});return{transaction:(0,i.parseTransaction)(u)}}async sendMessageDelayed(o){await this.ensureInitialized();const u=new a.DelayedTransactions,p=await this.subscribe("messageStatusUpdated");p.on("data",O=>{O.address.equals(o.sender)&&u.fillTransaction(O.hash,O.transaction)});const{message:w}=await this._api.sendMessageDelayed({sender:o.sender.toString(),recipient:o.recipient.toString(),amount:o.amount,bounce:o.bounce,payload:o.payload?{abi:o.payload.abi,method:o.payload.method,params:(0,i.serializeTokensObject)(o.payload.params)}:void 0,stateInit:o.stateInit}).catch(O=>{throw p.unsubscribe().catch(console.error),O}),S=u.waitTransaction(o.sender,w.hash).finally(()=>p.unsubscribe().catch(console.error));return{messageHash:w.hash,expireAt:w.expireAt,transaction:S}}_registerEventHandlers(o){const u={connected:p=>p,disconnected:p=>p,transactionsFound:p=>({address:new a.Address(p.address),transactions:p.transactions.map(i.parseTransaction),info:p.info}),contractStateChanged:p=>({address:new a.Address(p.address),state:p.state}),messageStatusUpdated:p=>({address:new a.Address(p.address),hash:p.hash,transaction:p.transaction!=null?(0,i.parseTransaction)(p.transaction):void 0}),networkChanged:p=>p,permissionsChanged:p=>({permissions:(0,i.parsePermissions)(p.permissions)}),loggedOut:p=>p};for(const[p,w]of Object.entries(u))o.addListener(p,S=>{const O=this._subscriptions[p],A=w(S);for(const D of O.values())D(A)})}}e.ProviderRpcClient=v;class y extends Error{constructor(){super("Everscale provider was not found")}}e.ProviderNotFoundException=y;class R extends Error{constructor(){super("Everscale provider was not initialized yet")}}e.ProviderNotInitializedException=R;function M(g,o){const u={state:!1,transactions:!1},p=Object.assign({},u);for(const w of g){if(p.transactions&&p.state)break;u.state||(u.state=w.state),u.transactions||(u.transactions=w.transactions),w!==o&&(p.state||(p.state=w.state),p.transactions||(p.transactions=w.transactions))}return{total:u,withoutExcluded:p}}})(Me);const Si={class:"modal is-active"},Ei=C("div",{class:"modal-background"},null,-1),Ii={class:"modal-content select-provider-modal"},Ai={class:"box"},ki=C("p",{class:"modal-title"},"Connect a wallet",-1),Di={class:"buttons"},Li=["onClick"],ji=L({__name:"ProviderSelector",props:{providers:{},onSelect:{type:Function}},setup(e){return(t,n)=>(m(),T("div",Si,[Ei,C("div",Ii,[C("div",Ai,[ki,C("div",Di,[(m(!0),T(le,null,Ce(t.providers,(s,r)=>(m(),T("button",{class:"button is-fullwidth provider-button",key:r,onClick:i=>t.onSelect(s.object)},q(s.title),9,Li))),128))])])])]))}});let _e;typeof document<"u"&&typeof window<"u"?document.readyState==="complete"?_e=Promise.resolve():_e=new Promise(e=>{window.addEventListener("load",()=>{e()})}):_e=Promise.resolve();class Ri{async request(t){if(this.inner==null)throw new Me.ProviderNotInitializedException;return this.inner.request(t)}addListener(t,n){var s;return(s=this.inner)==null||s.addListener(t,n),this}removeListener(t,n){var s;return(s=this.inner)==null||s.removeListener(t,n),this}on(t,n){var s;return(s=this.inner)==null||s.on(t,n),this}once(t,n){var s;return(s=this.inner)==null||s.once(t,n),this}prependListener(t,n){var s;return(s=this.inner)==null||s.prependListener(t,n),this}prependOnceListener(t,n){var s;return(s=this.inner)==null||s.prependOnceListener(t,n),this}}class Mi{constructor(t){this.params=t,this.provider=new Ri}asProviderFallback(){return()=>(this.providerPromise||(this.providerPromise=new Promise(t=>{this.providerResolve=t;const n=Ne();if(n){const s=this.getProviderByKey(n);s&&(this.provider.inner=s,this.providerResolve(s),this.providerResolve=void 0)}})),this.providerPromise)}initiateConnection(){if(this.providerResolve){const t=Ne();if(t){const s=this.getProviderByKey(t);if(s){this.provider.inner=s,this.providerResolve(s),this.providerResolve=void 0;return}}const n=async s=>{this.provider.inner=s,this.providerResolve(s),this.providerResolve=void 0;const r=this.getKeyByProvider(s);r&&this.setCookie("savedProviderKey",r,7)};this.selectProvider(n)||_e.then(()=>{if(!this.selectProvider(n))for(const{injected:s}of this.params.supportedWallets)typeof s.flag<"u"&&typeof s.event<"u"&&window[s.flag]===!0&&window.addEventListener(s.event,r=>{this.selectProvider(n)})})}}getProviderByKey(t){const n=this.params.supportedWallets.find(s=>s.title===t);if(n)return window[n.injected.object]}getKeyByProvider(t){const n=this.params.supportedWallets.find(s=>window[s.injected.object]===t);if(n)return n.title}selectProvider(t){const n=Ne();if(n){const a=this.getProviderByKey(n);if(a)return this.provider.inner=a,!0}const s=this.getProviders();if(s.length===0)return!1;if(s.length===1)return t(s[0].provider),!0;const r=$(null),i=ht({setup(){return()=>bt(ji,{providers:s.map(({provider:a,wallet:c})=>({title:c.title,object:a})),onSelect:a=>{r.value&&r.value.remove(),t(a)}})}});return be(()=>{if(typeof document>"u")return;document.getElementById("app")&&(r.value=document.createElement("div"),document.body.appendChild(r.value),i.mount(r.value))}),!0}getProviders(){const t=new Array;if(typeof window>"u")return t;for(const n of this.params.supportedWallets){const s=n.injected.object,r=window[s];r!=null&&t.push({provider:r,wallet:n})}return t}setCookie(t,n,s){if(typeof document>"u")return;let r="";if(s){let i=new Date;i.setTime(i.getTime()+s*24*60*60*1e3),r="; expires="+i.toUTCString()}document.cookie=t+"="+(n||"")+r+"; path=/"}deleteCookie(t){typeof document>"u"||(document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")}disconnectProvider(){this.provider.inner=void 0,this.providerPromise=void 0,this.deleteCookie("savedProviderKey")}}const Se=new Mi({supportedWallets:[{title:"EVER Wallet",injected:{object:"__ever",event:"ever#initialized"}},{title:"VENOM Wallet",injected:{object:"__venom"}}]}),Ne=(e="savedProviderKey")=>{if(typeof document>"u")return null;let t=e+"=",n=document.cookie.split(";");for(let s=0;s<n.length;s++){let r=n[s];for(;r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(t)==0)return r.substring(t.length,r.length)}return null},U=new Me.ProviderRpcClient({forceUseFallback:!0,fallback:Se.asProviderFallback()}),Ut=async()=>{Se.initiateConnection(),await new Me.ProviderRpcClient({forceUseFallback:!0,fallback:Se.asProviderFallback()}).requestPermissions({permissions:["basic","accountInteraction"]})},Bi=async()=>{await U.changeAccount()},$i=async()=>{await U.disconnect(),Se.disconnectProvider(),location.reload()},Ht=$(!1),tt=vt(),Te=$(),Ee=$();U.hasProvider().then(async e=>{if(!e)return;Ht.value=!0,await U.ensureInitialized(),(await U.subscribe("permissionsChanged")).on("data",n=>{tt.value=n.permissions.accountInteraction}),(await U.subscribe("networkChanged")).on("data",n=>{Ee.value=n.networkId.toString()});const t=await U.getProviderState();Ee.value=t.networkId.toString(),t.permissions.accountInteraction!=null&&await Ut()});mt([tt,Ee],async([e],t,n)=>{const s=e==null?void 0:e.address;if(s==null)return;Te.value=void 0;const{state:r}=await U.getFullContractState({address:s});if((e==null?void 0:e.address)!=s)return;Te.value=r==null?void 0:r.balance;const i=await U.subscribe("contractStateChanged",{address:s});n(()=>i.unsubscribe().catch(console.error)),i.on("data",a=>{a.address.equals(e==null?void 0:e.address)&&(Te.value=a.state.balance)})},{immediate:!0});function Ni(){return{provider:U,hasProvider:Ht,selectedAccount:tt,selectedAccountBalance:Te,selectedNetwork:Ee,connectToWallet:Ut,changeAccount:Bi,disconnect:$i}}const xi=L({name:"WalletControl",components:{DisconnectIcon:xt},setup(){const{provider:e,connectToWallet:t,changeAccount:n,disconnect:s}=Ni(),r=$(!1);return Ae(async()=>{(await e.subscribe("permissionsChanged")).on("data",b=>{r.value=!!b.permissions.accountInteraction});const f=await e.getProviderState();r.value=!!f.permissions.accountInteraction}),{connected:r,requestPermissions:async()=>{await t(),r.value=!0,location.reload()},disconnectWallet:async()=>{await s(),r.value=!1},changeAccountWallet:async()=>{await n()}}}});const zi={class:"walletControl"};function Vi(e,t,n,s,r,i){const a=ee("DisconnectIcon");return m(),T("div",zi,[e.connected?(m(),T("button",{key:0,onClick:t[0]||(t[0]=(...c)=>e.changeAccountWallet&&e.changeAccountWallet(...c))},"Change Account")):te("",!0),e.connected?(m(),T("button",{key:1,class:"disconnectBtn",onClick:t[1]||(t[1]=(...c)=>e.disconnectWallet&&e.disconnectWallet(...c))},[de(a,{size:16})])):(m(),T("button",{key:2,onClick:t[2]||(t[2]=(...c)=>e.requestPermissions&&e.requestPermissions(...c))},"Connect"))])}const Fi=G(xi,[["render",Vi],["__scopeId","data-v-abc38b4d"]]),Ui=["href","title"],Hi=L({__name:"BDKOutlineItem",props:{headers:{},root:{type:Boolean}},emits:["update-marker"],setup(e,{emit:t}){async function n(s){if(typeof document>"u")return;const i="#"+s.target.href.split("#")[1],a=document.querySelector(decodeURIComponent(i));a==null||a.focus(),await be(),t("update-marker")}return(s,r)=>{const i=ee("OutlineItem");return m(),T("ul",{class:ne(s.root?"root":"nested")},[(m(!0),T(le,null,Ce(s.headers,(a,c)=>{var l;return m(),T("li",{key:c},[C("a",{class:"outline-link",href:a.link,title:a.title,onClick:n},q(a.title),9,Ui),(l=a.children)!=null&&l.length?(m(),V(i,{key:0,headers:a.children},null,8,["headers"])):te("",!0)])}),128))],2)}}});const qt=G(Hi,[["__scopeId","data-v-185e9a32"]]),qi=e=>(pt("data-v-740e66a8"),e=e(),ft(),e),Ki={class:"content"},Wi={class:"outline-title"},Yi={"aria-labelledby":"doc-outline-aria-label"},Gi=qi(()=>C("span",{id:"doc-outline-aria-label",class:"visually-hidden"}," Table of Contents for current page ",-1)),Ji=L({__name:"BDKOutline",props:{content:{}},setup(e){const t=e,{serializeHeader:n,resolveHeaders:s,resolveTitle:r,useActiveAnchor:i,MenuItem:a}=require("./outline"),{frontmatter:c,theme:l}=Je(),f=vt([]),b=$(),_=$();i(b,_);const P=h=>{if(typeof document>"u")return[];const d=Array.from(document.querySelectorAll("h2,h3,h4,h5,h6")).filter(v=>v.id&&v.hasChildNodes()).map(v=>{const y=Number(v.tagName[1]);return{title:n(v),link:"#"+v.id,level:y}});return s(d,h)};return mt(()=>t.content,()=>{typeof window<"u"&&be(()=>{const h=document.createElement("div");h.innerHTML=t.content??"";const d=c.value.outline??2;f.value=P(d)})},{immediate:!0}),(h,d)=>(m(),T("div",{ref_key:"container",ref:b,class:ne(["asideOutline",{"has-outline":f.value.length>0}])},[C("div",Ki,[C("div",{ref_key:"marker",ref:_,class:"outline-marker"},null,512),C("div",Wi,q(Pe(r)(Pe(l))),1),C("nav",Yi,[Gi,de(qt,{headers:f.value,root:!0},null,8,["headers"])])])],2))}});const Kt=G(Ji,[["__scopeId","data-v-740e66a8"]]),Xi=L({__name:"BDKLayout",setup(e){const{Layout:t}=Ve,n=tn(),{frontmatter:s}=Je(),r=$(""),i=s.value.projectName??"";let a=Oe(()=>(n.path.split("/").pop()??"").replace(".html","")),c=$();const l=Oe(()=>s.value.apiReference??!1);return Ae(async()=>{var f;l.value&&(c.value=await He(i,a.value),r.value=(f=c.value)==null?void 0:f.content)}),nn(async()=>{var f;l.value&&(c.value=await He(i,a.value),r.value=(f=c.value)==null?void 0:f.content)}),(f,b)=>(m(),V(Pe(t),null,sn({"nav-bar-content-after":Z(()=>[(m(),V(rn,null,{default:Z(()=>[de(Fi)]),_:1}))]),_:2},[l.value?{name:"aside-outline-before",fn:Z(()=>[de(Kt,{content:r.value},null,8,["content"])]),key:"0"}:void 0]),1024))}}),Qi=L({name:"BDKPage",props:{projectName:{type:String,default:""},pageName:{type:String,default:""},nodeEnv:{type:String,default:"local"}},setup(e){const t=$({content:""});return Ae(async()=>{const n=await He(e.projectName,e.pageName,e.nodeEnv);if(n&&(t.value=n),await be(),typeof window<"u"&&typeof document<"u"){const s=window.location.hash;if(s){const r=document.getElementById(s.substring(1));r&&r.scrollIntoView({behavior:"smooth"})}}}),{apiReference:t}}});const Zi={key:0},er={key:1,class:"page-container"},tr=["innerHTML"];function nr(e,t,n,s,r,i){return e.apiReference.content===""||e.apiReference.content===void 0?(m(),T("div",Zi,"Loading...")):(m(),T("div",er,[C("div",{class:"page-content",innerHTML:e.apiReference.content},null,8,tr)]))}const sr=G(Qi,[["render",nr],["__scopeId","data-v-28db0a8b"]]),ir=L({name:"AccordionElement",props:{buttonText:{type:String,default:"Show transaction"},transactionData:{type:String,default:""}},setup(){const e=$(!1);function t(){e.value=!e.value}return{isOpen:e,toggleAccordion:t}}});const rr={class:"demo accordion"},ar={class:""};function or(e,t,n,s,r,i){return m(),T("div",rr,[C("button",{class:"",onClick:t[0]||(t[0]=(...a)=>e.toggleAccordion&&e.toggleAccordion(...a))},q(e.buttonText),1),xe(C("div",ar,[C("pre",null,q(e.transactionData),1)],512),[[an,e.isOpen]])])}const cr=G(ir,[["render",or],["__scopeId","data-v-fe994671"]]),ur=L({setup(){const e=$({name:"",age:null}),t=$("");function n(){t.value=JSON.stringify(e.value,null,2)}return{user:e,packedData:t,packData:n}}}),lr={class:"demo"},dr=C("label",{for:"name"},"Name:",-1),hr=C("label",{for:"age"},"Age:",-1),pr={key:0};function fr(e,t,n,s,r,i){return m(),T("div",lr,[C("div",null,[dr,xe(C("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=a=>e.user.name=a),type:"text"},null,512),[[st,e.user.name]])]),C("div",null,[hr,xe(C("input",{id:"age","onUpdate:modelValue":t[1]||(t[1]=a=>e.user.age=a),type:"number"},null,512),[[st,e.user.age]])]),C("button",{onClick:t[2]||(t[2]=(...a)=>e.packData&&e.packData(...a))},"Pack Data"),e.packedData?(m(),T("pre",pr,q(e.packedData),1)):te("",!0)])}const vr=G(ur,[["render",fr]]),{useToast:mr}=ys,br=(e,t)=>{const n=mr();switch(t){case 0:n.error({component:ce,props:{text:e}});break;case 2:n.info({component:ce,props:{text:e}});break;case 3:n.warning({component:ce,props:{text:e}});break;default:n.success({component:ce,props:{text:e}})}},gr={...Ve,Layout:Xi,enhanceApp({app:e}){Ve.enhanceApp({app:e}),e.use(Mt,{position:"top-right",timeout:5e3,closeOnClick:!1,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.7,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1}),e.config.errorHandler=function(t,n,s){br(t.message,0)},e.component("BDKSimpleToast",ce),e.component("BDKPage",sr),e.component("BDKOutline",Kt),e.component("BDKOutlineItem",qt),e.component("BDKDisconnectIcon",xt),e.component("BDKAccordion",cr),e.component("PackDataSample",vr)}};function Wt(e){if(e.extends){const t=Wt(e.extends);return{...t,...e,async enhanceApp(n){t.enhanceApp&&await t.enhanceApp(n),e.enhanceApp&&await e.enhanceApp(n)}}}return e}const re=Wt(gr),yr=L({name:"VitePressApp",setup(){const{site:e}=Je();return Ae(()=>{gn(()=>{document.documentElement.lang=e.value.lang,document.documentElement.dir=e.value.dir})}),yn(),wn(),_n(),re.setup&&re.setup(),()=>bt(re.Layout)}});async function wr(){const e=Tr(),t=_r();t.provide(cn,e);const n=un(e.route);return t.provide(ln,n),t.component("Content",dn),t.component("ClientOnly",hn),Object.defineProperties(t.config.globalProperties,{$frontmatter:{get(){return n.frontmatter.value}},$params:{get(){return n.page.value.params}}}),re.enhanceApp&&await re.enhanceApp({app:t,router:e,siteData:pn}),{app:t,router:e,data:n}}function _r(){return fn(yr)}function Tr(){let e=ze,t;return vn(n=>{let s=mn(n);return s?(e&&(t=s),(e||t===s)&&(s=s.replace(/\.js$/,".lean.js")),ze&&(e=!1),bn(()=>import(s),[])):null},re.NotFound)}ze&&wr().then(({app:e,router:t,data:n})=>{t.go().then(()=>{on(t.route,n.site),e.mount("#app")})});export{wr as createApp};
