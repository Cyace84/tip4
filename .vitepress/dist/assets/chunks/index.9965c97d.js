import{d as W,a5 as re,l as ae,c as M,U as Bt,n as Z,b as U,w as dt,R as St,O as Ot,J as Q,e as ct,k as $,K as gt,a as ht,t as lt,a1 as oe,a3 as ce,a6 as ue,L as Et,o as O,r as le,N as de,D as xt,$ as he,S as pe,E as fe,a7 as me,_ as be,h as ve,g as kt,p as we,m as ge}from"./framework.ab3d0493.js";var ye=Object.defineProperty,Mt=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,Lt=(t,e,s)=>e in t?ye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,Ft=(t,e)=>{for(var s in e||(e={}))_e.call(e,s)&&Lt(t,s,e[s]);if(Mt)for(var s of Mt(e))Te.call(e,s)&&Lt(t,s,e[s]);return t},pt=t=>typeof t=="function",ft=t=>typeof t=="string",Nt=t=>ft(t)&&t.trim().length>0,Pe=t=>typeof t=="number",H=t=>typeof t>"u",tt=t=>typeof t=="object"&&t!==null,Se=t=>x(t,"tag")&&Nt(t.tag),qt=t=>window.TouchEvent&&t instanceof TouchEvent,Ut=t=>x(t,"component")&&Vt(t.component),Oe=t=>pt(t)||tt(t),Vt=t=>!H(t)&&(ft(t)||Oe(t)||Ut(t)),Dt=t=>tt(t)&&["height","width","right","left","top","bottom"].every(e=>Pe(t[e])),x=(t,e)=>(tt(t)||pt(t))&&e in t,Ce=(t=>()=>t++)(0);function vt(t){return qt(t)?t.targetTouches[0].clientX:t.clientX}function Rt(t){return qt(t)?t.targetTouches[0].clientY:t.clientY}var Ae=t=>{H(t.remove)?t.parentNode&&t.parentNode.removeChild(t):t.remove()},rt=t=>Ut(t)?rt(t.component):Se(t)?W({render(){return t}}):typeof t=="string"?t:re(ae(t)),Ie=t=>{if(typeof t=="string")return t;const e=x(t,"props")&&tt(t.props)?t.props:{},s=x(t,"listeners")&&tt(t.listeners)?t.listeners:{};return{component:rt(t),props:e,listeners:s}},Ee=()=>typeof window<"u",mt=class{constructor(){this.allHandlers={}}getHandlers(t){return this.allHandlers[t]||[]}on(t,e){const s=this.getHandlers(t);s.push(e),this.allHandlers[t]=s}off(t,e){const s=this.getHandlers(t);s.splice(s.indexOf(e)>>>0,1)}emit(t,e){this.getHandlers(t).forEach(i=>i(e))}},ke=t=>["on","off","emit"].every(e=>x(t,e)&&pt(t[e])),D;(function(t){t.SUCCESS="success",t.ERROR="error",t.WARNING="warning",t.INFO="info",t.DEFAULT="default"})(D||(D={}));var et;(function(t){t.TOP_LEFT="top-left",t.TOP_CENTER="top-center",t.TOP_RIGHT="top-right",t.BOTTOM_LEFT="bottom-left",t.BOTTOM_CENTER="bottom-center",t.BOTTOM_RIGHT="bottom-right"})(et||(et={}));var R;(function(t){t.ADD="add",t.DISMISS="dismiss",t.UPDATE="update",t.CLEAR="clear",t.UPDATE_DEFAULTS="update_defaults"})(R||(R={}));var B="Vue-Toastification",z={type:{type:String,default:D.DEFAULT},classNames:{type:[String,Array],default:()=>[]},trueBoolean:{type:Boolean,default:!0}},Ht={type:z.type,customIcon:{type:[String,Boolean,Object,Function],default:!0}},ut={component:{type:[String,Object,Function,Boolean],default:"button"},classNames:z.classNames,showOnHover:{type:Boolean,default:!1},ariaLabel:{type:String,default:"close"}},yt={timeout:{type:[Number,Boolean],default:5e3},hideProgressBar:{type:Boolean,default:!1},isRunning:{type:Boolean,default:!1}},$t={transition:{type:[Object,String],default:`${B}__bounce`}},Me={position:{type:String,default:et.TOP_RIGHT},draggable:z.trueBoolean,draggablePercent:{type:Number,default:.6},pauseOnFocusLoss:z.trueBoolean,pauseOnHover:z.trueBoolean,closeOnClick:z.trueBoolean,timeout:yt.timeout,hideProgressBar:yt.hideProgressBar,toastClassName:z.classNames,bodyClassName:z.classNames,icon:Ht.customIcon,closeButton:ut.component,closeButtonClassName:ut.classNames,showCloseButtonOnHover:ut.showOnHover,accessibility:{type:Object,default:()=>({toastRole:"alert",closeButtonLabel:"close"})},rtl:{type:Boolean,default:!1},eventBus:{type:Object,required:!1,default:()=>new mt}},Le={id:{type:[String,Number],required:!0,default:0},type:z.type,content:{type:[String,Object,Function],required:!0,default:""},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0}},De={container:{type:[Object,Function],default:()=>document.body},newestOnTop:z.trueBoolean,maxToasts:{type:Number,default:20},transition:$t.transition,toastDefaults:Object,filterBeforeCreate:{type:Function,default:t=>t},filterToasts:{type:Function,default:t=>t},containerClassName:z.classNames,onMounted:Function,shareAppContext:[Boolean,Object]},N={CORE_TOAST:Me,TOAST:Le,CONTAINER:De,PROGRESS_BAR:yt,ICON:Ht,TRANSITION:$t,CLOSE_BUTTON:ut},Kt=W({name:"VtProgressBar",props:N.PROGRESS_BAR,data(){return{hasClass:!0}},computed:{style(){return{animationDuration:`${this.timeout}ms`,animationPlayState:this.isRunning?"running":"paused",opacity:this.hideProgressBar?0:1}},cpClass(){return this.hasClass?`${B}__progress-bar`:""}},watch:{timeout(){this.hasClass=!1,this.$nextTick(()=>this.hasClass=!0)}},mounted(){this.$el.addEventListener("animationend",this.animationEnded)},beforeUnmount(){this.$el.removeEventListener("animationend",this.animationEnded)},methods:{animationEnded(){this.$emit("close-toast")}}});function Re(t,e){return O(),M("div",{style:Bt(t.style),class:Z(t.cpClass)},null,6)}Kt.render=Re;var je=Kt,Wt=W({name:"VtCloseButton",props:N.CLOSE_BUTTON,computed:{buttonComponent(){return this.component!==!1?rt(this.component):"button"},classes(){const t=[`${B}__close-button`];return this.showOnHover&&t.push("show-on-hover"),t.concat(this.classNames)}}}),ze=ht(" Ã— ");function Be(t,e){return O(),U(Ot(t.buttonComponent),St({"aria-label":t.ariaLabel,class:t.classes},t.$attrs),{default:dt(()=>[ze]),_:1},16,["aria-label","class"])}Wt.render=Be;var xe=Wt,Gt={},Fe={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"svg-inline--fa fa-check-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Ne=$("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},null,-1),qe=[Ne];function Ue(t,e){return O(),M("svg",Fe,qe)}Gt.render=Ue;var Ve=Gt,Xt={},He={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"info-circle",class:"svg-inline--fa fa-info-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},$e=$("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},null,-1),Ke=[$e];function We(t,e){return O(),M("svg",He,Ke)}Xt.render=We;var jt=Xt,Jt={},Ge={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-circle",class:"svg-inline--fa fa-exclamation-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Xe=$("path",{fill:"currentColor",d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),Je=[Xe];function Qe(t,e){return O(),M("svg",Ge,Je)}Jt.render=Qe;var Ye=Jt,Qt={},Ze={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-triangle",class:"svg-inline--fa fa-exclamation-triangle fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},ts=$("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),es=[ts];function ss(t,e){return O(),M("svg",Ze,es)}Qt.render=ss;var ns=Qt,Yt=W({name:"VtIcon",props:N.ICON,computed:{customIconChildren(){return x(this.customIcon,"iconChildren")?this.trimValue(this.customIcon.iconChildren):""},customIconClass(){return ft(this.customIcon)?this.trimValue(this.customIcon):x(this.customIcon,"iconClass")?this.trimValue(this.customIcon.iconClass):""},customIconTag(){return x(this.customIcon,"iconTag")?this.trimValue(this.customIcon.iconTag,"i"):"i"},hasCustomIcon(){return this.customIconClass.length>0},component(){return this.hasCustomIcon?this.customIconTag:Vt(this.customIcon)?rt(this.customIcon):this.iconTypeComponent},iconTypeComponent(){return{[D.DEFAULT]:jt,[D.INFO]:jt,[D.SUCCESS]:Ve,[D.ERROR]:ns,[D.WARNING]:Ye}[this.type]},iconClasses(){const t=[`${B}__icon`];return this.hasCustomIcon?t.concat(this.customIconClass):t}},methods:{trimValue(t,e=""){return Nt(t)?t.trim():e}}});function is(t,e){return O(),U(Ot(t.component),{class:Z(t.iconClasses)},{default:dt(()=>[ht(lt(t.customIconChildren),1)]),_:1},8,["class"])}Yt.render=is;var rs=Yt,Zt=W({name:"VtToast",components:{ProgressBar:je,CloseButton:xe,Icon:rs},inheritAttrs:!1,props:Object.assign({},N.CORE_TOAST,N.TOAST),data(){return{isRunning:!0,disableTransitions:!1,beingDragged:!1,dragStart:0,dragPos:{x:0,y:0},dragRect:{}}},computed:{classes(){const t=[`${B}__toast`,`${B}__toast--${this.type}`,`${this.position}`].concat(this.toastClassName);return this.disableTransitions&&t.push("disable-transition"),this.rtl&&t.push(`${B}__toast--rtl`),t},bodyClasses(){return[`${B}__toast-${ft(this.content)?"body":"component-body"}`].concat(this.bodyClassName)},draggableStyle(){return this.dragStart===this.dragPos.x?{}:this.beingDragged?{transform:`translateX(${this.dragDelta}px)`,opacity:1-Math.abs(this.dragDelta/this.removalDistance)}:{transition:"transform 0.2s, opacity 0.2s",transform:"translateX(0)",opacity:1}},dragDelta(){return this.beingDragged?this.dragPos.x-this.dragStart:0},removalDistance(){return Dt(this.dragRect)?(this.dragRect.right-this.dragRect.left)*this.draggablePercent:0}},mounted(){this.draggable&&this.draggableSetup(),this.pauseOnFocusLoss&&this.focusSetup()},beforeUnmount(){this.draggable&&this.draggableCleanup(),this.pauseOnFocusLoss&&this.focusCleanup()},methods:{hasProp:x,getVueComponentFromObj:rt,closeToast(){this.eventBus.emit(R.DISMISS,this.id)},clickHandler(){this.onClick&&this.onClick(this.closeToast),this.closeOnClick&&(!this.beingDragged||this.dragStart===this.dragPos.x)&&this.closeToast()},timeoutHandler(){this.closeToast()},hoverPause(){this.pauseOnHover&&(this.isRunning=!1)},hoverPlay(){this.pauseOnHover&&(this.isRunning=!0)},focusPause(){this.isRunning=!1},focusPlay(){this.isRunning=!0},focusSetup(){addEventListener("blur",this.focusPause),addEventListener("focus",this.focusPlay)},focusCleanup(){removeEventListener("blur",this.focusPause),removeEventListener("focus",this.focusPlay)},draggableSetup(){const t=this.$el;t.addEventListener("touchstart",this.onDragStart,{passive:!0}),t.addEventListener("mousedown",this.onDragStart),addEventListener("touchmove",this.onDragMove,{passive:!1}),addEventListener("mousemove",this.onDragMove),addEventListener("touchend",this.onDragEnd),addEventListener("mouseup",this.onDragEnd)},draggableCleanup(){const t=this.$el;t.removeEventListener("touchstart",this.onDragStart),t.removeEventListener("mousedown",this.onDragStart),removeEventListener("touchmove",this.onDragMove),removeEventListener("mousemove",this.onDragMove),removeEventListener("touchend",this.onDragEnd),removeEventListener("mouseup",this.onDragEnd)},onDragStart(t){this.beingDragged=!0,this.dragPos={x:vt(t),y:Rt(t)},this.dragStart=vt(t),this.dragRect=this.$el.getBoundingClientRect()},onDragMove(t){this.beingDragged&&(t.preventDefault(),this.isRunning&&(this.isRunning=!1),this.dragPos={x:vt(t),y:Rt(t)})},onDragEnd(){this.beingDragged&&(Math.abs(this.dragDelta)>=this.removalDistance?(this.disableTransitions=!0,this.$nextTick(()=>this.closeToast())):setTimeout(()=>{this.beingDragged=!1,Dt(this.dragRect)&&this.pauseOnHover&&this.dragRect.bottom>=this.dragPos.y&&this.dragPos.y>=this.dragRect.top&&this.dragRect.left<=this.dragPos.x&&this.dragPos.x<=this.dragRect.right?this.isRunning=!1:this.isRunning=!0}))}}}),as=["role"];function os(t,e){const s=Q("Icon"),i=Q("CloseButton"),r=Q("ProgressBar");return O(),M("div",{class:Z(t.classes),style:Bt(t.draggableStyle),onClick:e[0]||(e[0]=(...n)=>t.clickHandler&&t.clickHandler(...n)),onMouseenter:e[1]||(e[1]=(...n)=>t.hoverPause&&t.hoverPause(...n)),onMouseleave:e[2]||(e[2]=(...n)=>t.hoverPlay&&t.hoverPlay(...n))},[t.icon?(O(),U(s,{key:0,"custom-icon":t.icon,type:t.type},null,8,["custom-icon","type"])):ct("v-if",!0),$("div",{role:t.accessibility.toastRole||"alert",class:Z(t.bodyClasses)},[typeof t.content=="string"?(O(),M(gt,{key:0},[ht(lt(t.content),1)],2112)):(O(),U(Ot(t.getVueComponentFromObj(t.content)),St({key:1,"toast-id":t.id},t.hasProp(t.content,"props")?t.content.props:{},oe(t.hasProp(t.content,"listeners")?t.content.listeners:{}),{onCloseToast:t.closeToast}),null,16,["toast-id","onCloseToast"]))],10,as),t.closeButton?(O(),U(i,{key:1,component:t.closeButton,"class-names":t.closeButtonClassName,"show-on-hover":t.showCloseButtonOnHover,"aria-label":t.accessibility.closeButtonLabel,onClick:ce(t.closeToast,["stop"])},null,8,["component","class-names","show-on-hover","aria-label","onClick"])):ct("v-if",!0),t.timeout?(O(),U(r,{key:2,"is-running":t.isRunning,"hide-progress-bar":t.hideProgressBar,timeout:t.timeout,onCloseToast:t.timeoutHandler},null,8,["is-running","hide-progress-bar","timeout","onCloseToast"])):ct("v-if",!0)],38)}Zt.render=os;var cs=Zt,te=W({name:"VtTransition",props:N.TRANSITION,emits:["leave"],methods:{hasProp:x,leave(t){t instanceof HTMLElement&&(t.style.left=t.offsetLeft+"px",t.style.top=t.offsetTop+"px",t.style.width=getComputedStyle(t).width,t.style.position="absolute")}}});function us(t,e){return O(),U(ue,{tag:"div","enter-active-class":t.transition.enter?t.transition.enter:`${t.transition}-enter-active`,"move-class":t.transition.move?t.transition.move:`${t.transition}-move`,"leave-active-class":t.transition.leave?t.transition.leave:`${t.transition}-leave-active`,onLeave:t.leave},{default:dt(()=>[le(t.$slots,"default")]),_:3},8,["enter-active-class","move-class","leave-active-class","onLeave"])}te.render=us;var ls=te,ee=W({name:"VueToastification",devtools:{hide:!0},components:{Toast:cs,VtTransition:ls},props:Object.assign({},N.CORE_TOAST,N.CONTAINER,N.TRANSITION),data(){return{count:0,positions:Object.values(et),toasts:{},defaults:{}}},computed:{toastArray(){return Object.values(this.toasts)},filteredToasts(){return this.defaults.filterToasts(this.toastArray)}},beforeMount(){const t=this.eventBus;t.on(R.ADD,this.addToast),t.on(R.CLEAR,this.clearToasts),t.on(R.DISMISS,this.dismissToast),t.on(R.UPDATE,this.updateToast),t.on(R.UPDATE_DEFAULTS,this.updateDefaults),this.defaults=this.$props},mounted(){this.setup(this.container)},methods:{async setup(t){pt(t)&&(t=await t()),Ae(this.$el),t.appendChild(this.$el)},setToast(t){H(t.id)||(this.toasts[t.id]=t)},addToast(t){t.content=Ie(t.content);const e=Object.assign({},this.defaults,t.type&&this.defaults.toastDefaults&&this.defaults.toastDefaults[t.type],t),s=this.defaults.filterBeforeCreate(e,this.toastArray);s&&this.setToast(s)},dismissToast(t){const e=this.toasts[t];!H(e)&&!H(e.onClose)&&e.onClose(),delete this.toasts[t]},clearToasts(){Object.keys(this.toasts).forEach(t=>{this.dismissToast(t)})},getPositionToasts(t){const e=this.filteredToasts.filter(s=>s.position===t).slice(0,this.defaults.maxToasts);return this.defaults.newestOnTop?e.reverse():e},updateDefaults(t){H(t.container)||this.setup(t.container),this.defaults=Object.assign({},this.defaults,t)},updateToast({id:t,options:e,create:s}){this.toasts[t]?(e.timeout&&e.timeout===this.toasts[t].timeout&&e.timeout++,this.setToast(Object.assign({},this.toasts[t],e))):s&&this.addToast(Object.assign({},{id:t},e))},getClasses(t){return[`${B}__container`,t].concat(this.defaults.containerClassName)}}});function ds(t,e){const s=Q("Toast"),i=Q("VtTransition");return O(),M("div",null,[(O(!0),M(gt,null,Et(t.positions,r=>(O(),M("div",{key:r},[de(i,{transition:t.defaults.transition,class:Z(t.getClasses(r))},{default:dt(()=>[(O(!0),M(gt,null,Et(t.getPositionToasts(r),n=>(O(),U(s,St({key:n.id},n),null,16))),128))]),_:2},1032,["transition","class"])]))),128))])}ee.render=ds;var hs=ee,zt=(t={},e=!0)=>{const s=t.eventBus=t.eventBus||new mt;e&&fe(()=>{const n=me(hs,Ft({},t)),o=n.mount(document.createElement("div")),h=t.onMounted;if(H(h)||h(o,n),t.shareAppContext){const p=t.shareAppContext;p===!0?console.warn(`[${B}] App to share context with was not provided.`):(n._context.components=p._context.components,n._context.directives=p._context.directives,n._context.mixins=p._context.mixins,n._context.provides=p._context.provides,n.config.globalProperties=p.config.globalProperties)}});const i=(n,o)=>{const h=Object.assign({},{id:Ce(),type:D.DEFAULT},o,{content:n});return s.emit(R.ADD,h),h.id};i.clear=()=>s.emit(R.CLEAR,void 0),i.updateDefaults=n=>{s.emit(R.UPDATE_DEFAULTS,n)},i.dismiss=n=>{s.emit(R.DISMISS,n)};function r(n,{content:o,options:h},p=!1){const f=Object.assign({},h,{content:o});s.emit(R.UPDATE,{id:n,options:f,create:p})}return i.update=r,i.success=(n,o)=>i(n,Object.assign({},o,{type:D.SUCCESS})),i.info=(n,o)=>i(n,Object.assign({},o,{type:D.INFO})),i.error=(n,o)=>i(n,Object.assign({},o,{type:D.ERROR})),i.warning=(n,o)=>i(n,Object.assign({},o,{type:D.WARNING})),i},ps=()=>{const t=()=>console.warn(`[${B}] This plugin does not support SSR!`);return new Proxy(t,{get(){return t}})};function st(t){return Ee()?ke(t)?zt({eventBus:t},!1):zt(t,!0):ps()}var bt=Symbol("VueToastification"),Ct=new mt,fs=(t,e)=>{(e==null?void 0:e.shareAppContext)===!0&&(e.shareAppContext=t);const s=st(Ft({eventBus:Ct},e));t.provide(bt,s)},ms=t=>{const e=st(t);xt()&&he(bt,e)},bs=t=>{if(t)return st(t);const e=xt()?pe(bt,void 0):void 0;return e||st(Ct)},vs=fs;const ws=Object.freeze(Object.defineProperty({__proto__:null,EventBus:mt,get POSITION(){return et},get TYPE(){return D},createToastInterface:st,default:vs,globalEventBus:Ct,provideToast:ms,toastInjectionKey:bt,useToast:bs},Symbol.toStringTag,{value:"Module"}));const gs={name:"BDKSimpleToast",props:{text:{type:String,required:!0},collapseLength:{type:Number,default:60}},setup(t){const e=ve(!0),s=kt(()=>t.text.slice(0,t.collapseLength)),i=kt(()=>t.text.length>t.collapseLength),r=()=>{e.value&&i.value?e.value=!1:closeToast()};return{isCollapsed:e,collapsedText:s,handleClick:()=>{i.value?r():closeToast()},shouldShowButton:i}}},ys=t=>(we("data-v-b34f46d6"),t=t(),ge(),t),_s={key:0,class:"toast-text-collapsed"},Ts=ys(()=>$("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1.3em",viewBox:"0 0 512 512"},[$("path",{d:"M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V352zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H320zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V352z"})],-1)),Ps=[Ts],Ss={key:1,class:"toast-text-expanded"};function Os(t,e,s,i,r,n){return O(),M("div",null,[i.isCollapsed?(O(),M("div",_s,[ht(lt(i.collapsedText)+" ",1),i.shouldShowButton?(O(),M("button",{key:0,onClick:e[0]||(e[0]=(...o)=>i.handleClick&&i.handleClick(...o))},Ps)):ct("",!0)])):(O(),M("div",Ss,lt(s.text),1))])}const ot=be(gs,[["render",Os],["__scopeId","data-v-b34f46d6"]]),{useToast:Cs}=ws,qs=(t,e)=>{const s=Cs();switch(e){case 0:s.error({component:ot,props:{text:t}});break;case 2:s.info({component:ot,props:{text:t}});break;case 3:s.warning({component:ot,props:{text:t}});break;default:s.success({component:ot,props:{text:t}})}};var q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Us(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(s,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),s}var As={},S={},X={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueId=t.mergeTransactions=t.LT_COLLATOR=t.Semaphore=t.DelayedTransactions=t.MessageExpiredException=t.AddressLiteral=t.isAddressObject=t.Address=void 0;class e{constructor(u){this.equals=m=>this._equals(m),this._address=u}toString(){return this._address}toJSON(){return this._address}_equals(u){return typeof u=="string"?this._address===u:this._address===(u==null?void 0:u._address)}}t.Address=e;function s(l){return l!=null&&(l instanceof e||Object.getPrototypeOf(l).constructor.name===e.prototype.constructor.name)}t.isAddressObject=s;class i extends e{constructor(u){super(u)}}t.AddressLiteral=i;class r extends Error{constructor(u,m){super("Message expired"),this.address=u,this.hash=m}}t.MessageExpiredException=r;class n{constructor(){this.transactions=new Map}async waitTransaction(u,m){var w;let k=(w=this.transactions.get(m))===null||w===void 0?void 0:w.promise;if(k==null){let b,a;k=new Promise((c,d)=>{b=v=>c(v),a=()=>d()}),this.transactions.set(m,{promise:k,resolve:b,reject:a})}const L=await k;if(L==null)throw new r(u,m);return L}fillTransaction(u,m){const w=this.transactions.get(u);w!=null?w.resolve(m):this.transactions.set(u,{promise:Promise.resolve(m),resolve:()=>{},reject:()=>{}})}}t.DelayedTransactions=n;class o{constructor(u){this.tasks=[],this.sched=()=>{var m;this.count>0&&this.tasks.length>0&&(this.count--,(m=this.tasks.shift())===null||m===void 0||m())},this.count=u}acquire(){return new Promise((u,m)=>{this.tasks.push(()=>{let w=!1;u(()=>{w||(w=!0,this.count++,this.sched())})}),p(this.sched)})}releaseAll(){for(var u;this.tasks.length>0;)(u=this.tasks.shift())===null||u===void 0||u()}}t.Semaphore=o;function h(l){const u=document.createTextNode("");let m,w,k=0,L=0;return new l(function(){let b;if(m)w&&(m=w.slice(L).concat(m));else{if(!w)return;m=w}if(w=m,m=null,L=0,typeof w=="function"){b=w,w=null,b();return}for(u.data=k=++k%2;L<w.length;)b=w[L],L++,L===w.length&&(w=null),b()}).observe(u,{characterData:!0}),function(b){if(m){typeof m=="function"?m=[m,b]:m.push(b);return}m=b,u.data=k=++k%2}}const p=function(){if(typeof queueMicrotask=="function")return queueMicrotask;if(typeof document=="object"&&document){if(typeof MutationObserver=="function")return h(MutationObserver);if(typeof window.WebKitMutationObserver=="function")return h(window.WebKitMutationObserver)}if(typeof setImmediate=="function")return setImmediate;if(typeof setTimeout=="function"||typeof setTimeout=="object")return function(l){setTimeout(l,0)};throw new Error("No `nextTick` implementation found")}();t.LT_COLLATOR=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function f(l,u,m){if(m.batchType==="old")return l.push(...u),l;if(l.length===0)return l.push(...u),l;let w=0;for(;w<l.length&&t.LT_COLLATOR.compare(l[w].id.lt,m.maxLt)>=0;)++w;return l.splice(w,0,...u),l}t.mergeTransactions=f;const g=4294967295;let y=Math.floor(Math.random()*g);function _(){return y=(y+1)%g,y}t.getUniqueId=_})(X);Object.defineProperty(S,"__esModule",{value:!0});S.parsePartialTokensObject=S.parseTokensObject=S.serializeTokensObject=S.parseAccountInteraction=S.parsePermissions=S.parseMessage=S.serializeMessage=S.parseTransaction=S.serializeTransaction=void 0;const nt=X;function Is(t){return{id:{hash:t.id.hash,lt:t.id.lt},prevTransactionId:t.prevTransactionId!=null?{hash:t.prevTransactionId.hash,lt:t.prevTransactionId.lt}:void 0,createdAt:t.createdAt,aborted:t.aborted,exitCode:t.exitCode,resultCode:t.resultCode,origStatus:t.origStatus,endStatus:t.endStatus,totalFees:t.totalFees,inMessage:_t(t.inMessage),outMessages:t.outMessages.map(_t)}}S.serializeTransaction=Is;function Es(t){return{...t,inMessage:Tt(t.inMessage),outMessages:t.outMessages.map(Tt)}}S.parseTransaction=Es;function _t(t){return{hash:t.hash,src:t.src?t.src.toString():void 0,dst:t.dst?t.dst.toString():void 0,value:t.value,bounce:t.bounce,bounced:t.bounced,body:t.body,bodyHash:t.bodyHash}}S.serializeMessage=_t;function Tt(t){return{...t,src:t.src?new nt.Address(t.src):void 0,dst:t.dst?new nt.Address(t.dst):void 0}}S.parseMessage=Tt;function ks(t){return{...t,accountInteraction:t.accountInteraction?se(t.accountInteraction):void 0}}S.parsePermissions=ks;function se(t){return{...t,address:new nt.Address(t.address)}}S.parseAccountInteraction=se;function Ms(t){return Pt(t)}S.serializeTokensObject=Ms;function Pt(t){if(typeof t=="object"&&(0,nt.isAddressObject)(t))return t.toString();if(Array.isArray(t)){const e=[];for(const s of t)e.push(Pt(s));return e}else if(t!=null&&typeof t=="object"){const e={};for(const[s,i]of Object.entries(t))e[s]=Pt(i);return e}else return t}function Ls(t,e){const s={};for(const i of t)s[i.name]=V(i,e[i.name]);return s}S.parseTokensObject=Ls;function Ds(t,e){const s={};for(const i of t)Object.prototype.hasOwnProperty.call(e,i.name)&&(s[i.name]=V(i,!e[i.name]));return s}S.parsePartialTokensObject=Ds;function V(t,e){if(t.type.startsWith("map")){const s=t.type.indexOf(","),i=t.type.slice(4,s),r=t.type.slice(s+1,-1),n=[];for(const[o,h]of e)n.push([V({name:"",type:i},o),V({name:"",type:r,components:t.components},h)]);return n}else{const s=t.type.endsWith("[]"),i=!s&&t.type.startsWith("optional"),r=s?t.type.slice(0,-2):i?t.type.slice(9,-1):t.type;if(s){const n={name:t.name,type:r,components:t.components},o=[];for(const h of e)o.push(V(n,h));return o}else if(i){if(e==null)return null;{const n={name:t.name,type:r,components:t.components};return V(n,e)}}else if(r==="tuple"){const n={};if(t.components!=null)for(const o of t.components)n[o.name]=V(o,e[o.name]);return n}else return r==="address"?new nt.Address(e):e}}var it={};Object.defineProperty(it,"__esModule",{value:!0});it.Subscriber=void 0;const Y=X,Rs=S;class js{constructor(e){this.provider=e,this.subscriptions=new Map,this.scanners=new Map,this.unsubscribe=async()=>this._unsubscribe()}transactions(e){return this._addSubscription("transactionsFound",e,!1)}trace(e){const s=(0,Y.getUniqueId)();return new E((i,r)=>{const n=new Bs(this.provider,{origin:e,onData:i,onEnd:o=>{this.scanners.delete(s),r(o)}});return this.scanners.set(s,n),n.start(),Promise.resolve()},async()=>{const i=this.scanners.get(s);i!=null&&(this.scanners.delete(s),await i.stop())},wt,!0)}oldTransactions(e,s){const i=(0,Y.getUniqueId)();return new E((r,n)=>{const o=new zs(this.provider,{address:e,onData:r,onEnd:h=>{this.scanners.delete(i),n(h)},...s});return this.scanners.set(i,o),o.start(),Promise.resolve()},async()=>{const r=this.scanners.get(i);r!=null&&(this.scanners.delete(i),await r.stop())},wt,!0)}states(e){return this._addSubscription("contractStateChanged",e,!1)}async _unsubscribe(){const e=[];for(const s of this.subscriptions.values())for(const[i,r]of Object.entries(s))delete s[i],r!=null&&e.push(r.subscription.then(n=>n.unsubscribe()).catch(()=>{}));this.subscriptions.clear();for(const s of this.scanners.values())e.push(s.stop());this.scanners.clear(),await Promise.all(e)}_addSubscription(e,s,i){const r=s.toString(),n=h=>{const p=this.subscriptions.get(r);if(p==null)return;const f=p[e];if(f!=null){const g=f.handlers.get(h);if(g!=null){f.handlers.delete(h);const{queue:y,onEnd:_,state:l}=g;l.finished||(l.finished=!0,y.clear(),y.enqueue(async()=>_(l.eof)))}if(f.handlers.size===0){const y=f.subscription;delete p[e],y.then(_=>_.unsubscribe()).catch(console.debug)}}p.contractStateChanged==null&&p.transactionsFound==null&&this.subscriptions.delete(r)},o=(0,Y.getUniqueId)();return new E((h,p)=>{const f=this.subscriptions.get(r);let g=f==null?void 0:f[e];const y={eof:!1,finished:!1},_={onData:h,onEnd:p,queue:new At,state:y};if(g!=null)return g.handlers.set(o,_),Promise.resolve();const l=new Map;l.set(o,_);const u=this.provider.subscribe(e,{address:s}).then(m=>(m.on("data",w=>{for(const{onData:k,queue:L,state:b}of l.values())b.eof||b.finished||L.enqueue(async()=>{await k(w)||(b.eof=!0,n(o))})}),m.on("unsubscribed",()=>{for(const w of l.keys())n(w)}),m)).catch(m=>{console.error(m);for(const w of l.keys())n(w);throw m});return g={subscription:u,handlers:l},f==null?this.subscriptions.set(r,{[e]:g}):f[e]=g,u.then(()=>{})},()=>n(o),wt,i)}}it.Subscriber=js;async function wt(t,e){return e(t)}class E{constructor(e,s,i,r){this.makeProducer=e,this.stopProducer=s,this.extractor=i,this.isFinite=r,this.fold=this.onlyFinite((n,o,h)=>{let p=n;return new Promise((f,g)=>{const y=this.makeProducer(_=>this.extractor(_,async l=>(p=await o(p,l),!0)),_=>{_?f(p):g(new Error("Subscription closed"))});h!=null&&(h.subscribed=y)})}),this.finished=this.onlyFinite(n=>new Promise((o,h)=>{const p=this.makeProducer(f=>this.extractor(f,g=>!0),f=>{f?o(void 0):h(new Error("Subscription closed"))});n!=null&&(n.subscribed=p)}))}async delayed(e){const{subscribed:s,result:i}=e({first:()=>{const r={},n=this.first(r);return{subscribed:r.subscribed,result:n}},on:r=>{const n={};return this.on(r,n),{subscribed:n.subscribed,result:void 0}},fold:this.fold!=null?(r,n)=>{const o={},h=this.fold(r,n,o);return{subscribed:o.subscribed,result:h}}:void 0,finished:this.finished!=null?()=>{const r={},n=this.finished(r);return{subscribed:r.subscribed,result:n}}:void 0});return await s,()=>i}first(e){const s={found:!1};return new Promise((i,r)=>{const n=this.makeProducer(o=>this.extractor(o,h=>(Object.assign(s,{found:!0,result:h}),!1)),o=>{o?this.isFinite?i(s.found?s.result:void 0):s.found?i(s.result):r(new Error("Unexpected end of stream")):r(new Error("Subscription closed"))});e!=null&&(e.subscribed=n)})}on(e,s){const i=this.makeProducer(r=>this.extractor(r,async n=>(await e(n),!0)),r=>{});s!=null&&(s.subscribed=i)}merge(e){return new E((s,i)=>{const r={stopped:!1,counter:0},n=o=>{r.stopped||(++r.counter==2||!o)&&(r.stopped=!0,i(o))};return Promise.all([this.makeProducer(s,n),e.makeProducer(s,n)]).then(()=>{})},()=>{this.stopProducer(),e.stopProducer()},this.extractor,this.isFinite&&e.isFinite)}enumerate(){const e={index:0};return new E(this.makeProducer,this.stopProducer,(s,i)=>this.extractor(s,async r=>i({index:e.index++,item:r})),this.isFinite)}tap(e){return new E(this.makeProducer,this.stopProducer,(s,i)=>this.extractor(s,async r=>(await e(r),i(r))),this.isFinite)}filter(e){return new E(this.makeProducer,this.stopProducer,(s,i)=>this.extractor(s,async r=>await e(r)?i(r):!0),this.isFinite)}filterMap(e){return new E(this.makeProducer,this.stopProducer,(s,i)=>this.extractor(s,async r=>{const n=await e(r);return n!==void 0?i(n):!0}),this.isFinite)}map(e){return new E(this.makeProducer,this.stopProducer,(s,i)=>this.extractor(s,async r=>{const n=await e(r);return i(n)}),this.isFinite)}flatMap(e){return new E(this.makeProducer,this.stopProducer,(s,i)=>this.extractor(s,async r=>{const n=await e(r);for(const o of n)if(!await i(o))return!1;return!0}),this.isFinite)}skip(e){const s={index:0};return new E(this.makeProducer,this.stopProducer,(i,r)=>this.extractor(i,n=>s.index>=e?r(n):(++s.index,!0)),this.isFinite)}skipWhile(e){const s={shouldSkip:!0};return new E(this.makeProducer,this.stopProducer,(i,r)=>this.extractor(i,async n=>!s.shouldSkip||!await e(n)?(s.shouldSkip=!1,r(n)):!0),this.isFinite)}take(e){const s={index:0};return new E(this.makeProducer,this.stopProducer,(i,r)=>this.extractor(i,n=>s.index<e?(++s.index,r(n)):!1),!0)}takeWhile(e){return new E(this.makeProducer,this.stopProducer,(s,i)=>this.extractor(s,async r=>await e(r)?i(r):!1),!0)}takeWhileMap(e){return new E(this.makeProducer,this.stopProducer,(s,i)=>this.extractor(s,async r=>{const n=await e(r);return n!==void 0?i(n):!1}),!0)}onlyFinite(e){if(this.isFinite)return e}}class zs{constructor(e,s){this.provider=e,this.params=s,this.queue=new At,this.isRunning=!1}start(){this.isRunning||this.promise!=null||(this.isRunning=!0,this.promise=(async()=>{const e=this.params,s={complete:!1};for(;this.isRunning&&!s.complete;)try{const{transactions:i,continuation:r}=await this.provider.getTransactions({address:this.params.address,continuation:this.continuation});if(s.complete=!s.complete&&i.length==null,!this.isRunning||s.complete)break;const n=i.filter(h=>(e.fromLt==null||Y.LT_COLLATOR.compare(h.id.lt,e.fromLt)>0)&&(e.fromUtime==null||h.createdAt>e.fromUtime));if(n.length==0){s.complete=!0;break}const o={maxLt:n[0].id.lt,minLt:n[n.length-1].id.lt,batchType:"old"};if(this.queue.enqueue(async()=>{await this.params.onData({address:this.params.address,transactions:n,info:o})||(s.complete=!0,this.isRunning=!1)}),r!=null)this.continuation=r;else{s.complete=!0;break}}catch(i){console.error(i)}this.queue.enqueue(async()=>this.params.onEnd(s.complete)),this.isRunning=!1,this.continuation=void 0})())}async stop(){this.isRunning=!1,this.queue.clear(),this.promise!=null?await this.promise:this.params.onEnd(!1)}}class Bs{constructor(e,s){this.provider=e,this.params=s,this.queue=new At,this.isRunning=!1,this.semaphore=new Y.Semaphore(10)}start(){if(this.isRunning||this.promise!=null)return;const e=this.provider;this.isRunning=!0,this.promise=(async()=>{const s={complete:!1},i=n=>{const o={stopped:!1};return{promise:(async()=>{let f=500;for(;;){const g=await this.semaphore.acquire();if(o.stopped){g();return}const y=await e.rawApi.findTransaction({inMessageHash:n}).catch(()=>({transaction:void 0})).finally(()=>g());if(o.stopped)return;if(y.transaction!=null){const u=(0,Rs.parseTransaction)(y.transaction);return u.account=u.inMessage.dst,u}let _;const l=new Promise((u,m)=>{_=()=>u(),o.reject=()=>m()});if(o.timeout=setTimeout(_,f),await l,o.stopped)return;o.reject=void 0,f=Math.min(f*2,3e3)}})(),reject:()=>{var f;o.stopped=!0,(f=o.reject)===null||f===void 0||f.call(o),o.timeout!=null&&clearTimeout(o.timeout)}}},r=[this.params.origin];try{t:for(;this.isRunning;){const n=r.shift();if(n==null){s.complete=!0;break}const o=n.outMessages.filter(h=>h.dst!=null).map(h=>{const p=h.hash;return i(p)});this.pendingTransactions=o;for(const{promise:h}of o){const p=await h;if(!this.isRunning||s.complete||p==null)break t;this.queue.enqueue(async()=>{await this.params.onData(p)||(s.complete=!0,this.isRunning=!1,this.rejectPendingTransactions())}),r.push(p)}this.pendingTransactions=void 0}}catch(n){console.error(n)}finally{this.queue.enqueue(async()=>this.params.onEnd(s.complete)),this.isRunning=!1,this.rejectPendingTransactions()}})()}async stop(){this.isRunning=!1,this.queue.clear(),this.rejectPendingTransactions(),this.promise!=null?await this.promise:this.params.onEnd(!1)}rejectPendingTransactions(){if(this.pendingTransactions!=null){for(const e of this.pendingTransactions)e.reject();this.pendingTransactions=void 0}this.semaphore.releaseAll()}}class At{constructor(){this.queue=[],this.workingOnPromise=!1}enqueue(e){this.queue.push(e),this._dequeue().catch(()=>{})}clear(){this.queue.length=0}async _dequeue(){if(this.workingOnPromise)return;const e=this.queue.shift();e&&(this.workingOnPromise=!0,e().then(()=>{this.workingOnPromise=!1,this._dequeue()}).catch(()=>{this.workingOnPromise=!1,this._dequeue()}))}}var K={};Object.defineProperty(K,"__esModule",{value:!0});K.TvmException=K.Contract=void 0;const G=X,C=S;class xs{constructor(e,s,i){if(!Array.isArray(s.functions))throw new Error("Invalid abi. Functions array required");if(!Array.isArray(s.events))throw new Error("Invalid abi. Events array required");this._provider=e,this._abi=JSON.stringify(s),this.methodsAbi=s.functions.reduce((r,n)=>(n.inputs==null&&(n.inputs=[]),n.outputs==null&&(n.outputs=[]),r[n.name]=n,r),{}),this.eventsAbi=s.events.reduce((r,n)=>(n.inputs==null&&(n.inputs=[]),r[n.name]=n,r),{}),this.fieldsAbi=s.fields,this._address=i,this._methods=new Proxy({},{get:(r,n)=>{const o=this.methodsAbi[n];return(h={})=>new Fs(this._provider,o,this._abi,this._address,n,h)}}),this._fields=new Proxy({},{get:(r,n)=>async(o={})=>{await this._provider.ensureInitialized();const{fields:h,state:p}=await this._provider.rawApi.getContractFields({address:this._address.toString(),abi:this._abi,cachedState:o==null?void 0:o.cachedState,allowPartial:(o==null?void 0:o.allowPartial)==null?!1:o.allowPartial});if(h==null)throw p==null?new Error("Account does not exist"):p.isDeployed?new Error("Invalid account data"):new Error("Account is not deployed");const f=(0,C.parseTokensObject)(this.fieldsAbi,h);if(f==null||!Object.prototype.hasOwnProperty.call(f,n))throw new Error("Unknown field");return f[n]}})}get methods(){return this._methods}get fields(){return this._fields}get address(){return this._address}get abi(){return this._abi}async getFullState(){return await this._provider.ensureInitialized(),await this._provider.rawApi.getFullContractState({address:this.address.toString()})}async getFields(e={}){await this._provider.ensureInitialized();const{fields:s,state:i}=await this._provider.rawApi.getContractFields({address:this.address.toString(),abi:this._abi,cachedState:e.cachedState,allowPartial:e.allowPartial==null?!1:e.allowPartial});return{fields:s!=null?(0,C.parseTokensObject)(this.fieldsAbi,s):void 0,state:i}}transactions(e){return e.transactions(this._address).flatMap(({transactions:s})=>s)}events(e){return e.transactions(this._address).flatMap(({transactions:s})=>s).flatMap(s=>this.decodeTransactionEvents({transaction:s}).then(i=>(i.forEach(r=>r.transaction=s),i)))}async waitForEvent(e={}){const{range:s,filter:i}=e,r=typeof i=="string"?({event:p})=>p===i:i;let n=e.subscriber;const o=n==null;n==null&&(n=new this._provider.Subscriber);const h=await((s==null?void 0:s.fromLt)!=null||(s==null?void 0:s.fromUtime)!=null?n.oldTransactions(this._address,s).merge(n.transactions(this._address)):n.transactions(this.address)).flatMap(p=>p.transactions).takeWhile(p=>s==null||(s.fromLt==null||G.LT_COLLATOR.compare(p.id.lt,s.fromLt)>0)&&(s.fromUtime==null||p.createdAt>s.fromUtime)&&(s.toLt==null||G.LT_COLLATOR.compare(p.id.lt,s.toLt)<0)&&(s.toUtime==null||p.createdAt<s.toUtime)).flatMap(p=>this.decodeTransactionEvents({transaction:p}).then(f=>(f.forEach(g=>g.transaction=p),f))).filterMap(async p=>{if(r==null||await r(p))return p}).first();return o&&await n.unsubscribe(),h}async getPastEvents(e){const{range:s,filter:i,limit:r}=e,n=typeof i=="string"?({event:p})=>p===i:i,o=[];let h=e==null?void 0:e.continuation;t:for(;;){const{transactions:p,continuation:f}=await this._provider.getTransactions({address:this._address,continuation:h});if(p.length===null)break;const g=p.filter(y=>((s==null?void 0:s.fromLt)==null||G.LT_COLLATOR.compare(y.id.lt,s.fromLt)>0)&&((s==null?void 0:s.fromUtime)==null||y.createdAt>s.fromUtime)&&((s==null?void 0:s.toLt)==null||G.LT_COLLATOR.compare(y.id.lt,s.toLt)<0)&&((s==null?void 0:s.toUtime)==null||y.createdAt<s.toUtime));if(g.length>0){const y=await Promise.all(g.map(async _=>({tx:_,events:await this.decodeTransactionEvents({transaction:_}).then(l=>(l.forEach(u=>u.transaction=_),l))})));for(let{tx:_,events:l}of y){n!=null&&(l=await Promise.all(l.map(async u=>await n(u)?u:void 0)).then(u=>u.filter(m=>m!=null))),h=_.id;for(const u of l){if(r!=null&&o.length>=r)break t;o.push(u)}if(r!=null&&o.length>=r)break t}}if(h=f,h==null)break}return{events:o,continuation:h}}async decodeTransaction(e){await this._provider.ensureInitialized();try{const s=await this._provider.rawApi.decodeTransaction({transaction:(0,C.serializeTransaction)(e.transaction),abi:this._abi,method:e.methods});if(s==null)return;const{method:i,input:r,output:n}=s,o=this.methodsAbi[i];return{method:i,input:o.inputs!=null?(0,C.parseTokensObject)(o.inputs,r):{},output:o.outputs!=null?(0,C.parseTokensObject)(o.outputs,n):{}}}catch{return}}async decodeTransactionEvents(e){await this._provider.ensureInitialized();try{const{events:s}=await this._provider.rawApi.decodeTransactionEvents({transaction:(0,C.serializeTransaction)(e.transaction),abi:this._abi}),i=[];for(const{event:r,data:n}of s){const o=this.eventsAbi[r];i.push({event:r,data:o.inputs!=null?(0,C.parseTokensObject)(o.inputs,n):{}})}return i}catch{return[]}}async decodeInputMessage(e){await this._provider.ensureInitialized();try{const s=await this._provider.rawApi.decodeInput({abi:this._abi,body:e.body,internal:e.internal,method:e.methods});if(s==null)return;const{method:i,input:r}=s,n=this.methodsAbi[i];return{method:i,input:n.inputs!=null?(0,C.parseTokensObject)(n.inputs,r):{}}}catch{return}}async decodeOutputMessage(e){await this._provider.ensureInitialized();try{const s=await this._provider.rawApi.decodeOutput({abi:this._abi,body:e.body,method:e.methods});if(s==null)return;const{method:i,output:r}=s,n=this.methodsAbi[i];return{method:i,output:n.outputs!=null?(0,C.parseTokensObject)(n.outputs,r):{}}}catch{return}}async decodeEvent(e){await this._provider.ensureInitialized();try{const s=await this._provider.rawApi.decodeEvent({abi:this.abi,body:e.body,event:e.events});if(s==null)return;const{event:i,data:r}=s,n=this.eventsAbi[i];return{event:i,data:n.inputs!=null?(0,C.parseTokensObject)(n.inputs,r):{}}}catch{return}}}K.Contract=xs;class ne extends Error{constructor(e){super(`TvmException: ${e}`),this.code=e}}K.TvmException=ne;class Fs{constructor(e,s,i,r,n,o){this.provider=e,this.functionAbi=s,this.abi=i,this.address=r,this.method=n,this.params=(0,C.serializeTokensObject)(o)}async send(e){await this.provider.ensureInitialized();const{transaction:s}=await this.provider.rawApi.sendMessage({sender:e.from.toString(),recipient:this.address.toString(),amount:e.amount,bounce:e.bounce==null?!0:e.bounce,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:e.stateInit});return(0,C.parseTransaction)(s)}async sendDelayed(e){await this.provider.ensureInitialized();const s=new G.DelayedTransactions,i=await this.provider.subscribe("messageStatusUpdated");i.on("data",o=>{o.address.equals(e.from)&&s.fillTransaction(o.hash,o.transaction)});const{message:r}=await this.provider.rawApi.sendMessageDelayed({sender:e.from.toString(),recipient:this.address.toString(),amount:e.amount,bounce:e.bounce==null?!0:e.bounce,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:e.stateInit}).catch(o=>{throw i.unsubscribe().catch(console.error),o}),n=s.waitTransaction(this.address,r.hash).finally(()=>i.unsubscribe().catch(console.error));return{messageHash:r.hash,expireAt:r.expireAt,transaction:n}}async sendWithResult(e){await this.provider.ensureInitialized();let s=e.subscriber;const i=s==null;s==null&&(s=new this.provider.Subscriber);try{let r,n;const o=new Promise(l=>{n=u=>l(u)}),h=[];s.transactions(this.address).flatMap(l=>l.transactions).filter(l=>{var u;return((u=l.inMessage.src)===null||u===void 0?void 0:u.equals(e.from))||!1}).on(l=>{r==null?h.push(l):r.possibleMessages.findIndex(u=>u.hash==l.inMessage.hash)>=0&&(n==null||n(l))});const p=await this.send(e),f=p.outMessages.filter(l=>{var u;return((u=l.dst)===null||u===void 0?void 0:u.equals(this.address))||!1});r={transaction:p,possibleMessages:f};const g=h.find(l=>f.findIndex(u=>u.hash==l.inMessage.hash)>=0);g!=null&&(n==null||n(g));const y=await o;let _;try{const l=await this.provider.rawApi.decodeTransaction({transaction:(0,C.serializeTransaction)(y),abi:this.abi,method:this.method});l!=null&&(_=this.functionAbi.outputs!=null?(0,C.parseTokensObject)(this.functionAbi.outputs,l.output):{})}catch(l){console.error(l)}return{parentTransaction:r.transaction,childTransaction:y,output:_}}finally{i&&await s.unsubscribe()}}async estimateFees(e){await this.provider.ensureInitialized();const{fees:s}=await this.provider.rawApi.estimateFees({sender:e.from.toString(),recipient:this.address.toString(),amount:e.amount,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:e.stateInit});return s}async sendExternal(e){await this.provider.ensureInitialized();const s=e.withoutSignature===!0?this.provider.rawApi.sendUnsignedExternalMessage:this.provider.rawApi.sendExternalMessage,{transaction:i,output:r}=await s({publicKey:e.publicKey,recipient:this.address.toString(),stateInit:e.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},local:e.local,executorParams:e.executorParams?{disableSignatureCheck:e.executorParams.disableSignatureCheck,overrideBalance:e.executorParams.overrideBalance}:void 0});return{transaction:(0,C.parseTransaction)(i),output:r!=null?(0,C.parseTokensObject)(this.functionAbi.outputs,r):void 0}}async sendExternalDelayed(e){await this.provider.ensureInitialized();const s=new G.DelayedTransactions,i=await this.provider.subscribe("messageStatusUpdated");i.on("data",o=>{o.address.equals(this.address)&&s.fillTransaction(o.hash,o.transaction)});const{message:r}=await this.provider.rawApi.sendExternalMessageDelayed({publicKey:e.publicKey,recipient:this.address.toString(),stateInit:e.stateInit,payload:{abi:this.abi,method:this.method,params:this.params}}).catch(o=>{throw i.unsubscribe().catch(console.error),o}),n=s.waitTransaction(this.address,r.hash).finally(()=>i.unsubscribe().catch(console.error));return{messageHash:r.hash,expireAt:r.expireAt,transaction:n}}async call(e={}){await this.provider.ensureInitialized();const{output:s,code:i}=await this.provider.rawApi.runLocal({address:this.address.toString(),cachedState:e.cachedState,responsible:e.responsible,functionCall:{abi:this.abi,method:this.method,params:this.params}});if(s==null||i!=0)throw new ne(i);return(0,C.parseTokensObject)(this.functionAbi.outputs,s)}async executeExternal(e){await this.provider.ensureInitialized();const{transaction:s,newState:i,output:r}=await this.provider.rawApi.executeLocal({address:this.address.toString(),cachedState:e.cachedState,stateInit:e.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},messageHeader:{type:"external",publicKey:e.publicKey,withoutSignature:e.withoutSignature},executorParams:e.executorParams!=null?{disableSignatureCheck:e.executorParams.disableSignatureCheck,overrideBalance:e.executorParams.overrideBalance}:void 0});return{transaction:(0,C.parseTransaction)(s),newState:i,output:r!==void 0?(0,C.parseTokensObject)(this.functionAbi.outputs,r):void 0}}async executeInternal(e){await this.provider.ensureInitialized();const{transaction:s,newState:i,output:r}=await this.provider.rawApi.executeLocal({address:this.address.toString(),cachedState:e.cachedState,stateInit:e.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},messageHeader:{type:"internal",sender:e.sender.toString(),amount:e.amount,bounce:e.bounce!=null?e.bounce:!1,bounced:e.bounced},executorParams:e.executorParams!=null?{disableSignatureCheck:e.executorParams.disableSignatureCheck,overrideBalance:e.executorParams.overrideBalance}:void 0});return{transaction:(0,C.parseTransaction)(s),newState:i,output:r!==void 0?(0,C.parseTokensObject)(this.functionAbi.outputs,r):void 0}}async encodeInternal(){await this.provider.ensureInitialized();const{boc:e}=await this.provider.rawApi.encodeInternalInput({abi:this.abi,method:this.method,params:this.params});return e}}var ie={};Object.defineProperty(ie,"__esModule",{value:!0});(function(t){var e=q&&q.__createBinding||(Object.create?function(b,a,c,d){d===void 0&&(d=c);var v=Object.getOwnPropertyDescriptor(a,c);(!v||("get"in v?!a.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(b,d,v)}:function(b,a,c,d){d===void 0&&(d=c),b[d]=a[c]}),s=q&&q.__setModuleDefault||(Object.create?function(b,a){Object.defineProperty(b,"default",{enumerable:!0,value:a})}:function(b,a){b.default=a}),i=q&&q.__importStar||function(b){if(b&&b.__esModule)return b;var a={};if(b!=null)for(var c in b)c!=="default"&&Object.prototype.hasOwnProperty.call(b,c)&&e(a,b,c);return s(a,b),a},r=q&&q.__exportStar||function(b,a){for(var c in b)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,b,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProviderNotInitializedException=t.ProviderNotFoundException=t.ProviderRpcClient=t.hasEverscaleProvider=t.LT_COLLATOR=t.isAddressObject=t.mergeTransactions=t.MessageExpiredException=t.AddressLiteral=t.Address=t.Subscriber=void 0;const n=S,o=X,h=i(it),p=i(K);r(ie,t),r(S,t),r(K,t);var f=it;Object.defineProperty(t,"Subscriber",{enumerable:!0,get:function(){return f.Subscriber}});var g=X;Object.defineProperty(t,"Address",{enumerable:!0,get:function(){return g.Address}}),Object.defineProperty(t,"AddressLiteral",{enumerable:!0,get:function(){return g.AddressLiteral}}),Object.defineProperty(t,"MessageExpiredException",{enumerable:!0,get:function(){return g.MessageExpiredException}}),Object.defineProperty(t,"mergeTransactions",{enumerable:!0,get:function(){return g.mergeTransactions}}),Object.defineProperty(t,"isAddressObject",{enumerable:!0,get:function(){return g.isAddressObject}}),Object.defineProperty(t,"LT_COLLATOR",{enumerable:!0,get:function(){return g.LT_COLLATOR}});const y=typeof window<"u"&&typeof window.document<"u";let _;!y||document.readyState==="complete"?_=Promise.resolve():_=new Promise(b=>{window.addEventListener("load",()=>{b()})});const l=()=>y?window.__ever||window.ton:void 0;async function u(){return y?(await _,window.__hasEverscaleProvider===!0||window.hasTonProvider===!0):!1}t.hasEverscaleProvider=u;class m{constructor(a={}){this._subscriptions={connected:new Map,disconnected:new Map,transactionsFound:new Map,contractStateChanged:new Map,messageStatusUpdated:new Map,networkChanged:new Map,permissionsChanged:new Map,loggedOut:new Map},this._contractSubscriptions=new Map,this._properties=a;const c=this;class d extends p.Contract{constructor(T,A){super(c,T,A)}}this.Contract=d;class v extends h.Subscriber{constructor(){super(c)}}this.Subscriber=v,this._api=new Proxy({},{get:(P,T)=>A=>{if(this._provider!=null)return this._provider.request({method:T,params:A});throw new k}}),a.forceUseFallback===!0?this._initializationPromise=a.fallback!=null?a.fallback().then(P=>{this._provider=P}):Promise.resolve():(this._provider=l(),this._provider!=null?this._initializationPromise=Promise.resolve():this._initializationPromise=u().then(P=>new Promise(T=>{if(!P)return T();if(this._provider=l(),this._provider!=null)T();else{const A=window.__hasEverscaleProvider===!0?"ever#initialized":"ton#initialized";window.addEventListener(A,I=>{this._provider=l(),T()})}})).then(async()=>{this._provider==null&&a.fallback!=null&&(this._provider=await a.fallback())})),this._initializationPromise.then(()=>{this._provider!=null&&this._registerEventHandlers(this._provider)})}async hasProvider(){return this._properties.fallback!=null?!0:u()}async ensureInitialized(){if(await this._initializationPromise,this._provider==null)throw new w}get isInitialized(){return this._provider!=null}get raw(){if(this._provider!=null)return this._provider;throw new k}get rawApi(){return this._api}createContract(a,c){return new this.Contract(a,c)}createSubscriber(){return new this.Subscriber}async requestPermissions(a){await this.ensureInitialized();const c=await this._api.requestPermissions({permissions:a.permissions});return(0,n.parsePermissions)(c)}async changeAccount(){await this.ensureInitialized(),await this._api.changeAccount()}async disconnect(){await this.ensureInitialized(),await this._api.disconnect()}async subscribe(a,c){class d{constructor(A,I){this._subscribe=A,this._unsubscribe=I,this._listeners={data:[],subscribed:[],unsubscribed:[]},this._subscribed=!1,this.subscribe=async()=>{if(!this._subscribed){this._subscribed=!0,await this._subscribe(this);for(const j of this._listeners.subscribed)j()}},this.unsubscribe=async()=>{if(this._subscribed){this._subscribed=!1,await this._unsubscribe();for(const j of this._listeners.unsubscribed)j()}}}on(A,I){return this._listeners[A].push(I),this}notify(A){for(const I of this._listeners.data)I(A)}}const v=this._subscriptions[a],P=(0,o.getUniqueId)();switch(a){case"connected":case"disconnected":case"messageStatusUpdated":case"networkChanged":case"permissionsChanged":case"loggedOut":{const T=new d(async A=>{v.has(P)||v.set(P,I=>{A.notify(I)})},async()=>{v.delete(P)});return await T.subscribe(),T}case"transactionsFound":case"contractStateChanged":{if(c==null)throw new Error("Address must be specified for the subscription");await this.ensureInitialized();const T=c.address.toString(),A=new d(async I=>{if(v.has(P))return;v.set(P,at=>{at.address.toString()===T&&I.notify(at)});let j=this._contractSubscriptions.get(T);j==null&&(j=new Map,this._contractSubscriptions.set(T,j));const J={state:a==="contractStateChanged",transactions:a==="transactionsFound"};j.set(P,J);const{total:F,withoutExcluded:It}=L(j.values(),J);try{(F.transactions!==It.transactions||F.state!==It.state)&&await this.rawApi.subscribe({address:T,subscriptions:F})}catch(at){throw v.delete(P),j.delete(P),at}},async()=>{v.delete(P);const I=this._contractSubscriptions.get(T);if(I==null)return;const j=I.get(P),{total:J,withoutExcluded:F}=L(I.values(),j);I.delete(P),!F.transactions&&!F.state?await this.rawApi.unsubscribe({address:T}):(J.transactions!==F.transactions||J.state!==F.state)&&await this.rawApi.subscribe({address:T,subscriptions:F})});return await A.subscribe(),A}default:throw new Error(`Unknown event ${a}`)}}async getProviderState(){await this.ensureInitialized();const a=await this._api.getProviderState();return{...a,permissions:(0,n.parsePermissions)(a.permissions)}}async getBalance(a){const{state:c}=await this.getFullContractState({address:a});return c==null?"0":c==null?void 0:c.balance}async getFullContractState(a){return await this.ensureInitialized(),await this._api.getFullContractState({address:a.address.toString()})}async getAccountsByCodeHash(a){await this.ensureInitialized();const{accounts:c,continuation:d}=await this._api.getAccountsByCodeHash({...a});return{accounts:c.map(v=>new o.Address(v)),continuation:d}}async getTransactions(a){await this.ensureInitialized();const{transactions:c,continuation:d,info:v}=await this._api.getTransactions({...a,address:a.address.toString()});return{transactions:c.map(n.parseTransaction),continuation:d,info:v}}async getTransaction(a){await this.ensureInitialized();const{transaction:c}=await this._api.getTransaction({...a});return{transaction:c?(0,n.parseTransaction)(c):void 0}}async getExpectedAddress(a,c){const{address:d}=await this.getStateInit(a,c);return d}async getStateInit(a,c){await this.ensureInitialized();const{address:d,stateInit:v,hash:P}=await this._api.getExpectedAddress({abi:JSON.stringify(a),...c,initParams:(0,n.serializeTokensObject)(c.initParams)});return{address:new o.Address(d),stateInit:v,hash:P}}async unpackInitData(a,c){await this.ensureInitialized();const{publicKey:d,initParams:v}=await this._api.unpackInitData({abi:JSON.stringify(a),data:c});return{publicKey:d,initParams:(0,n.parsePartialTokensObject)(a.data,v)}}async getBocHash(a){return await this.ensureInitialized(),await this._api.getBocHash({boc:a}).then(({hash:c})=>c)}async packIntoCell(a){return await this.ensureInitialized(),await this._api.packIntoCell({abiVersion:a.abiVersion,structure:a.structure,data:(0,n.serializeTokensObject)(a.data)})}async unpackFromCell(a){await this.ensureInitialized();const{data:c}=await this._api.unpackFromCell({...a,structure:a.structure});return{data:(0,n.parseTokensObject)(a.structure,c)}}async extractPublicKey(a){await this.ensureInitialized();const{publicKey:c}=await this._api.extractPublicKey({boc:a});return c}async codeToTvc(a){await this.ensureInitialized();const{tvc:c}=await this._api.codeToTvc({code:a});return c}async mergeTvc(a){return await this.ensureInitialized(),await this._api.mergeTvc(a)}async splitTvc(a){return await this.ensureInitialized(),await this._api.splitTvc({tvc:a})}async setCodeSalt(a){let c;if(typeof a.salt=="string")await this.ensureInitialized(),c=a.salt;else{const{boc:d}=await this.packIntoCell(a.salt);c=d}return await this._api.setCodeSalt({code:a.code,salt:c})}async getCodeSalt(a){await this.ensureInitialized();const{salt:c}=await this.rawApi.getCodeSalt({code:a.code});return c}async addAsset(a){await this.ensureInitialized();let c;switch(a.type){case"tip3_token":{c={rootContract:a.params.rootContract.toString()};break}default:throw new Error("Unknown asset type")}return await this._api.addAsset({account:a.account.toString(),type:a.type,params:c})}async verifySignature(a){return await this.ensureInitialized(),await this._api.verifySignature(a)}async signData(a){return await this.ensureInitialized(),await this._api.signData(a)}async signDataRaw(a){return await this.ensureInitialized(),await this._api.signDataRaw(a)}async encryptData(a){await this.ensureInitialized();const{encryptedData:c}=await this._api.encryptData(a);return c}async decryptData(a){await this.ensureInitialized();const{data:c}=await this._api.decryptData({encryptedData:a});return c}async sendMessage(a){await this.ensureInitialized();const{transaction:c}=await this._api.sendMessage({sender:a.sender.toString(),recipient:a.recipient.toString(),amount:a.amount,bounce:a.bounce,payload:a.payload?{abi:a.payload.abi,method:a.payload.method,params:(0,n.serializeTokensObject)(a.payload.params)}:void 0,stateInit:a.stateInit});return{transaction:(0,n.parseTransaction)(c)}}async sendMessageDelayed(a){await this.ensureInitialized();const c=new o.DelayedTransactions,d=await this.subscribe("messageStatusUpdated");d.on("data",T=>{T.address.equals(a.sender)&&c.fillTransaction(T.hash,T.transaction)});const{message:v}=await this._api.sendMessageDelayed({sender:a.sender.toString(),recipient:a.recipient.toString(),amount:a.amount,bounce:a.bounce,payload:a.payload?{abi:a.payload.abi,method:a.payload.method,params:(0,n.serializeTokensObject)(a.payload.params)}:void 0,stateInit:a.stateInit}).catch(T=>{throw d.unsubscribe().catch(console.error),T}),P=c.waitTransaction(a.sender,v.hash).finally(()=>d.unsubscribe().catch(console.error));return{messageHash:v.hash,expireAt:v.expireAt,transaction:P}}_registerEventHandlers(a){const c={connected:d=>d,disconnected:d=>d,transactionsFound:d=>({address:new o.Address(d.address),transactions:d.transactions.map(n.parseTransaction),info:d.info}),contractStateChanged:d=>({address:new o.Address(d.address),state:d.state}),messageStatusUpdated:d=>({address:new o.Address(d.address),hash:d.hash,transaction:d.transaction!=null?(0,n.parseTransaction)(d.transaction):void 0}),networkChanged:d=>d,permissionsChanged:d=>({permissions:(0,n.parsePermissions)(d.permissions)}),loggedOut:d=>d};for(const[d,v]of Object.entries(c))a.addListener(d,P=>{const T=this._subscriptions[d],A=v(P);for(const I of T.values())I(A)})}}t.ProviderRpcClient=m;class w extends Error{constructor(){super("Everscale provider was not found")}}t.ProviderNotFoundException=w;class k extends Error{constructor(){super("Everscale provider was not initialized yet")}}t.ProviderNotInitializedException=k;function L(b,a){const c={state:!1,transactions:!1},d=Object.assign({},c);for(const v of b){if(d.transactions&&d.state)break;c.state||(c.state=v.state),c.transactions||(c.transactions=v.transactions),v!==a&&(d.state||(d.state=v.state),d.transactions||(d.transactions=v.transactions))}return{total:c,withoutExcluded:d}}})(As);export{ot as B,As as d,Us as g,vs as s,qs as t};
